{"ast":null,"code":"let pt = class He extends Error {\n  constructor(e, n, o) {\n    super(typeof n == \"object\" ? n.message : n || e, {\n      cause: typeof n == \"object\" ? n.cause : o\n    }), this.type = e, Object.setPrototypeOf(this, He.prototype);\n  }\n};\nfunction Ge(t) {\n  return t.replace(/[A-Z]/g, e => `_${e.toLowerCase()}`);\n}\nfunction Fo(t) {\n  return t.replace(/_[a-z]/g, e => e[1].toUpperCase());\n}\nconst Jo = \"ERR_INVALID_VALUE\",\n  Ko = \"ERR_UNEXPECTED_VALUE\",\n  Qo = \"ERR_UNEXPECTED_TYPE\",\n  ze = \"ERR_PARSE\";\nfunction Ye(t, e) {\n  const n = {};\n  for (const o in t) {\n    const s = t[o];\n    if (!s) continue;\n    let r, a;\n    typeof s == \"function\" ? (r = o, a = s) : [r, a] = s;\n    try {\n      const i = a(e(r));\n      i !== void 0 && (n[o] = i);\n    } catch (i) {\n      throw new pt(ze, `Parser for \"${o}\" property failed${r === o ? \"\" : `. Source field: \"${r}\"`}`, i);\n    }\n  }\n  return n;\n}\nfunction Fe(t) {\n  let e = t;\n  if (typeof e == \"string\") try {\n    e = JSON.parse(e);\n  } catch (n) {\n    throw new pt(Jo, {\n      cause: n\n    });\n  }\n  if (typeof e != \"object\" || !e || Array.isArray(e)) throw new pt(Ko);\n  return e;\n}\nfunction k(t, e) {\n  return n => {\n    const o = s => {\n      if (!(n && s === void 0)) try {\n        return e(s);\n      } catch (r) {\n        throw new pt(ze, {\n          message: `\"${t}\" transformer failed to parse the value`,\n          cause: r\n        });\n      }\n    };\n    return /* @__PURE__ */Object.assign(o, {\n      isValid(s) {\n        try {\n          return o(s), !0;\n        } catch {\n          return !1;\n        }\n      }\n    });\n  };\n}\nfunction xt(t, e) {\n  return k(e || \"object\", n => {\n    const o = Fe(n);\n    return Ye(t, s => o[s]);\n  });\n}\nfunction St(t) {\n  throw new pt(Qo, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst Xo = k(\"boolean\", t => {\n    if (typeof t == \"boolean\") return t;\n    const e = String(t);\n    if (e === \"1\" || e === \"true\") return !0;\n    if (e === \"0\" || e === \"false\") return !1;\n    St(t);\n  }),\n  D = k(\"string\", t => {\n    if (typeof t == \"string\" || typeof t == \"number\") return t.toString();\n    St(t);\n  }),\n  kt = k(\"number\", t => {\n    if (typeof t == \"number\") return t;\n    if (typeof t == \"string\") {\n      const e = Number(t);\n      if (!Number.isNaN(e)) return e;\n    }\n    St(t);\n  }),\n  Je = k(\"date\", t => t instanceof Date ? t : new Date(kt()(t) * 1e3));\nfunction Ke(t, e) {\n  return k(e || \"searchParams\", n => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && St(n);\n    const o = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return Ye(t, s => {\n      const r = o.get(s);\n      return r === null ? void 0 : r;\n    });\n  });\n}\nfunction Gt(t) {\n  for (const e in t) t[e] = [Ge(e), t[e]];\n  return t;\n}\nconst Zo = t => {\n  const e = kt(),\n    n = kt(!0),\n    o = D(),\n    s = D(!0),\n    r = Xo(!0),\n    a = xt(Gt({\n      addedToAttachmentMenu: r,\n      allowsWriteToPm: r,\n      firstName: o,\n      id: e,\n      isBot: r,\n      isPremium: r,\n      languageCode: s,\n      lastName: s,\n      photoUrl: s,\n      username: s\n    }), \"User\")(!0);\n  return Ke(Gt({\n    authDate: Je(),\n    canSendAfter: n,\n    chat: xt(Gt({\n      id: e,\n      type: o,\n      title: o,\n      photoUrl: s,\n      username: s\n    }), \"Chat\")(!0),\n    chatInstance: s,\n    chatType: s,\n    hash: o,\n    queryId: s,\n    receiver: a,\n    startParam: s,\n    user: a\n  }), \"initData\")(t);\n};\nfunction Ct(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction ts(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction Qe(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (Ct(e)) return e;\n  if (ts(e)) {\n    let o = \"#\";\n    for (let s = 0; s < 3; s += 1) o += e[1 + s].repeat(2);\n    return o;\n  }\n  const n = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n) throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((o, s) => {\n    const r = parseInt(s, 10).toString(16);\n    return o + (r.length === 1 ? \"0\" : \"\") + r;\n  }, \"#\");\n}\nconst es = k(\"rgb\", t => Qe(D()(t))),\n  ns = k(\"themeParams\", t => {\n    const e = es(!0);\n    return Object.entries(Fe(t)).reduce((n, [o, s]) => (n[Fo(o)] = e(s), n), {});\n  });\n// @__NO_SIDE_EFFECTS__\nfunction os(t) {\n  return JSON.stringify(Object.fromEntries(Object.entries(t).map(([e, n]) => [Ge(e), n])));\n}\n// @__NO_SIDE_EFFECTS__\nfunction gi(t) {\n  const {\n      initDataRaw: e,\n      startParam: n,\n      showSettings: o,\n      botInline: s\n    } = t,\n    r = new URLSearchParams();\n  return r.set(\"tgWebAppPlatform\", t.platform), r.set(\"tgWebAppThemeParams\", /* @__PURE__ */os(t.themeParams)), r.set(\"tgWebAppVersion\", t.version), e && r.set(\"tgWebAppData\", e), n && r.set(\"tgWebAppStartParam\", n), typeof o == \"boolean\" && r.set(\"tgWebAppShowSettings\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && r.set(\"tgWebAppBotInline\", s ? \"1\" : \"0\"), r.toString();\n}\nfunction ss(t, e) {\n  return k(\"array\", n => {\n    let o;\n    if (Array.isArray(n)) o = n;else if (typeof n == \"string\") try {\n      const s = JSON.parse(n);\n      Array.isArray(s) && (o = s);\n    } catch {}\n    return o || St(n), o.map(t);\n  });\n}\nfunction Xe(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nfunction Xt(...t) {\n  return t.map(e => {\n    if (typeof e == \"string\") return e;\n    if (Xe(e)) return Xt(Object.entries(e).map(n => n[1] && n[0]));\n    if (Array.isArray(e)) return Xt(...e);\n  }).filter(Boolean).join(\" \");\n}\nfunction wi(...t) {\n  return t.reduce((e, n) => (Xe(n) && Object.entries(n).forEach(([o, s]) => {\n    const r = Xt(e[o], s);\n    r && (e[o] = r);\n  }), e), {});\n}\nlet _t = class Ze extends Error {\n  constructor(e, n, o) {\n    super(typeof n == \"object\" ? n.message : n || e, {\n      cause: typeof n == \"object\" ? n.cause : o\n    }), this.type = e, Object.setPrototypeOf(this, Ze.prototype);\n  }\n};\nfunction tn(t) {\n  return t.replace(/[A-Z]/g, e => `_${e.toLowerCase()}`);\n}\nfunction rs(t) {\n  return t.replace(/_[a-z]/g, e => e[1].toUpperCase());\n}\nconst as = \"ERR_INVALID_VALUE\",\n  is = \"ERR_UNEXPECTED_VALUE\",\n  cs = \"ERR_UNEXPECTED_TYPE\",\n  en = \"ERR_PARSE\";\nfunction nn(t, e) {\n  const n = {};\n  for (const o in t) {\n    const s = t[o];\n    if (!s) continue;\n    let r, a;\n    typeof s == \"function\" ? (r = o, a = s) : [r, a] = s;\n    try {\n      const i = a(e(r));\n      i !== void 0 && (n[o] = i);\n    } catch (i) {\n      throw new _t(en, `Parser for \"${o}\" property failed${r === o ? \"\" : `. Source field: \"${r}\"`}`, i);\n    }\n  }\n  return n;\n}\nfunction on(t) {\n  let e = t;\n  if (typeof e == \"string\") try {\n    e = JSON.parse(e);\n  } catch (n) {\n    throw new _t(as, {\n      cause: n\n    });\n  }\n  if (typeof e != \"object\" || !e || Array.isArray(e)) throw new _t(is);\n  return e;\n}\nfunction B(t, e) {\n  return n => {\n    const o = s => {\n      if (!(n && s === void 0)) try {\n        return e(s);\n      } catch (r) {\n        throw new _t(en, {\n          message: `\"${t}\" transformer failed to parse the value`,\n          cause: r\n        });\n      }\n    };\n    return /* @__PURE__ */Object.assign(o, {\n      isValid(s) {\n        try {\n          return o(s), !0;\n        } catch {\n          return !1;\n        }\n      }\n    });\n  };\n}\nfunction A(t, e) {\n  return B(e || \"object\", n => {\n    const o = on(n);\n    return nn(t, s => o[s]);\n  });\n}\nfunction vt(t) {\n  throw new _t(cs, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst Nt = B(\"boolean\", t => {\n    if (typeof t == \"boolean\") return t;\n    const e = String(t);\n    if (e === \"1\" || e === \"true\") return !0;\n    if (e === \"0\" || e === \"false\") return !1;\n    vt(t);\n  }),\n  C = B(\"string\", t => {\n    if (typeof t == \"string\" || typeof t == \"number\") return t.toString();\n    vt(t);\n  }),\n  dt = B(\"number\", t => {\n    if (typeof t == \"number\") return t;\n    if (typeof t == \"string\") {\n      const e = Number(t);\n      if (!Number.isNaN(e)) return e;\n    }\n    vt(t);\n  }),\n  us = B(\"date\", t => t instanceof Date ? t : new Date(dt()(t) * 1e3));\nfunction sn(t, e) {\n  return B(e || \"searchParams\", n => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && vt(n);\n    const o = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return nn(t, s => {\n      const r = o.get(s);\n      return r === null ? void 0 : r;\n    });\n  });\n}\nfunction zt(t) {\n  for (const e in t) t[e] = [tn(e), t[e]];\n  return t;\n}\nconst ls = t => {\n  const e = dt(),\n    n = dt(!0),\n    o = C(),\n    s = C(!0),\n    r = Nt(!0),\n    a = A(zt({\n      addedToAttachmentMenu: r,\n      allowsWriteToPm: r,\n      firstName: o,\n      id: e,\n      isBot: r,\n      isPremium: r,\n      languageCode: s,\n      lastName: s,\n      photoUrl: s,\n      username: s\n    }), \"User\")(!0);\n  return sn(zt({\n    authDate: us(),\n    canSendAfter: n,\n    chat: A(zt({\n      id: e,\n      type: o,\n      title: o,\n      photoUrl: s,\n      username: s\n    }), \"Chat\")(!0),\n    chatInstance: s,\n    chatType: s,\n    hash: o,\n    queryId: s,\n    receiver: a,\n    startParam: s,\n    user: a\n  }), \"initData\")(t);\n};\nfunction ps(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction _s(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction ds(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (ps(e)) return e;\n  if (_s(e)) {\n    let o = \"#\";\n    for (let s = 0; s < 3; s += 1) o += e[1 + s].repeat(2);\n    return o;\n  }\n  const n = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n) throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((o, s) => {\n    const r = parseInt(s, 10).toString(16);\n    return o + (r.length === 1 ? \"0\" : \"\") + r;\n  }, \"#\");\n}\nconst fs = B(\"rgb\", t => ds(C()(t))),\n  hs = B(\"themeParams\", t => {\n    const e = fs(!0);\n    return Object.entries(on(t)).reduce((n, [o, s]) => (n[rs(o)] = e(s), n), {});\n  });\n// @__NO_SIDE_EFFECTS__\nfunction rn(t) {\n  return JSON.stringify(Object.fromEntries(Object.entries(t).map(([e, n]) => [tn(e), n])));\n}\nconst bs = t => {\n  const e = C(),\n    n = C(!0),\n    o = Nt(!0);\n  return sn({\n    botInline: [\"tgWebAppBotInline\", o],\n    initData: [\"tgWebAppData\", ls(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", e],\n    showSettings: [\"tgWebAppShowSettings\", o],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", hs()],\n    version: [\"tgWebAppVersion\", e]\n  }, \"launchParams\")(t);\n};\n// @__NO_SIDE_EFFECTS__\nfunction ms(t) {\n  const {\n      initDataRaw: e,\n      startParam: n,\n      showSettings: o,\n      botInline: s\n    } = t,\n    r = new URLSearchParams();\n  return r.set(\"tgWebAppPlatform\", t.platform), r.set(\"tgWebAppThemeParams\", /* @__PURE__ */rn(t.themeParams)), r.set(\"tgWebAppVersion\", t.version), e && r.set(\"tgWebAppData\", e), n && r.set(\"tgWebAppStartParam\", n), typeof o == \"boolean\" && r.set(\"tgWebAppShowSettings\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && r.set(\"tgWebAppBotInline\", s ? \"1\" : \"0\"), r.toString();\n}\nconst an = A({\n    eventType: C(),\n    eventData: t => t\n  }, \"miniAppsMessage\"),\n  cn = B(\"fn\", t => {\n    if (typeof t == \"function\") return t;\n    vt(t);\n  });\nfunction gs(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nconst ws = A({\n  TelegramWebviewProxy: A({\n    postEvent: cn()\n  })()\n});\nfunction un(t) {\n  return ws().isValid(t);\n}\nfunction Es() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar ys = Object.defineProperty,\n  Ss = (t, e, n) => e in t ? ys(t, e, {\n    enumerable: !0,\n    configurable: !0,\n    writable: !0,\n    value: n\n  }) : t[e] = n,\n  ln = (t, e, n) => Ss(t, typeof e != \"symbol\" ? e + \"\" : e, n);\nlet l = class pn extends Error {\n  constructor(e, n, o) {\n    super(typeof n == \"object\" ? n.message : n || e, {\n      cause: typeof n == \"object\" ? n.cause : o\n    }), this.type = e, Object.setPrototypeOf(this, pn.prototype);\n  }\n};\nfunction Zt(t, e, n) {\n  return t.addEventListener(e, n), () => t.removeEventListener(e, n);\n}\nfunction rt(...t) {\n  const e = t.flat(1);\n  return [e.push.bind(e), () => {\n    e.forEach(n => {\n      n();\n    });\n  }];\n}\nfunction Cs(t, e) {\n  return t instanceof l && t.type === e;\n}\nfunction se(t) {\n  return e => Cs(e, t);\n}\nconst _n = \"ERR_ABORTED\",\n  dn = \"ERR_CANCELED\",\n  fn = \"ERR_TIMED_OUT\";\nfunction Oe(t) {\n  return new l(_n, {\n    cause: t\n  });\n}\nconst Ei = se(fn),\n  yi = se(_n),\n  Si = se(dn);\nfunction Ie(t, e) {\n  return t.reject = e.reject, t;\n}\nclass f extends Promise {\n  constructor(e, n) {\n    let o, s;\n    typeof e == \"function\" ? (o = e, s = n) : s = e;\n    let r, a;\n    super((i, p) => {\n      s || (s = {});\n      const {\n        abortSignal: u\n      } = s;\n      if (u && u.aborted) return p(Oe(u.reason));\n      const [d, w] = rt(),\n        y = tt => (...Yo) => (w(), tt(...Yo)),\n        Z = new AbortController(),\n        {\n          signal: G\n        } = Z;\n      a = y(tt => {\n        Z.abort(tt), p(tt);\n      }), r = y(i), u && d(Zt(u, \"abort\", () => {\n        a(Oe(u.reason));\n      }));\n      const {\n        timeout: Ht\n      } = s;\n      if (Ht) {\n        const tt = setTimeout(() => {\n          a(new l(fn, `Timeout reached: ${Ht}ms`));\n        }, Ht);\n        d(() => {\n          clearTimeout(tt);\n        });\n      }\n      o && o(r, a, G);\n    }), ln(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(e, n) {\n    return new f((o, s, r) => {\n      try {\n        const a = e(r);\n        return a instanceof Promise ? a.then(o, s) : o(a);\n      } catch (a) {\n        s(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(e) {\n    return new f(n => {\n      n(e);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(e) {\n    return new f((n, o) => {\n      o(e);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new l(dn));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(e) {\n    return this.then(void 0, e);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(e) {\n    return Ie(super.finally(e), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(e, n) {\n    return Ie(super.then(e, n), this);\n  }\n}\nfunction Me(t, e) {\n  return t.resolve = e.resolve, t;\n}\nclass ut extends f {\n  constructor(e, n) {\n    let o, s;\n    typeof e == \"function\" ? (o = e, s = n) : s = e;\n    let r;\n    super((a, i, p) => {\n      r = a, o && o(a, i, p);\n    }, s), ln(this, \"resolve\"), this.resolve = r;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(e, n) {\n    return new ut((o, s, r) => f.withFn(e, {\n      abortSignal: r\n    }).then(o, s), n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(e) {\n    return new ut(n => {\n      n(e);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(e) {\n    return new ut((n, o) => {\n      o(e);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(e) {\n    return this.then(void 0, e);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(e) {\n    return Me(super.finally(e), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(e, n) {\n    return Me(super.then(e, n), this);\n  }\n}\nfunction vs(t, e) {\n  return new f(n => {\n    setTimeout(n, t);\n  }, {\n    abortSignal: e\n  });\n}\nfunction hn(t) {\n  return `tapps/${t}`;\n}\nfunction P(t, e) {\n  sessionStorage.setItem(hn(t), JSON.stringify(e));\n}\nfunction $(t) {\n  const e = sessionStorage.getItem(hn(t));\n  try {\n    return e ? JSON.parse(e) : void 0;\n  } catch {}\n}\nfunction re(t) {\n  return t.replace(/[A-Z]/g, e => `-${e.toLowerCase()}`);\n}\n// @__NO_SIDE_EFFECTS__\nfunction Ps(t, e) {\n  e || (e = {});\n  const {\n    textColor: n,\n    bgColor: o,\n    shouldLog: s = !0\n  } = e;\n  function r(a, ...i) {\n    if (!s || typeof s == \"function\" && !s()) return;\n    const p = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](`%c${Intl.DateTimeFormat(\"en-GB\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      fractionalSecondDigits: 3,\n      timeZone: \"UTC\"\n    }).format(/* @__PURE__ */new Date())}%c / %c${t}`, `${p};background-color: lightblue;color:black`, \"\", `${p};${n ? `color:${n};` : \"\"}${o ? `background-color:${o}` : \"\"}`, ...i);\n  }\n  return [function (...a) {\n    r(\"log\", ...a);\n  }, function (...a) {\n    r(\"error\", ...a);\n  }];\n}\nfunction ae(t, e) {\n  document.documentElement.style.setProperty(t, e);\n}\nfunction ie(t) {\n  document.documentElement.style.removeProperty(t);\n}\nfunction $s(t, e) {\n  e();\n}\n// @__NO_SIDE_EFFECTS__\nfunction at(t, e) {\n  e || (e = {});\n  const n = e.equals || Object.is;\n  let o = [],\n    s = t;\n  const r = u => {\n    if (!n(s, u)) {\n      const d = s;\n      s = u, $s(p, () => {\n        [...o].forEach(([w, y]) => {\n          w(u, d), y && i(w, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const d = typeof u != \"object\" ? {\n      once: u\n    } : u;\n    return {\n      once: d.once || !1,\n      signal: d.signal || !1\n    };\n  }\n  const i = (u, d) => {\n      const w = a(d),\n        y = o.findIndex(([Z, G]) => Z === u && G.once === w.once && G.signal === w.signal);\n      y >= 0 && o.splice(y, 1);\n    },\n    p = Object.assign(function () {\n      return Ts(p), s;\n    }, {\n      destroy() {\n        o = [];\n      },\n      set: r,\n      reset() {\n        r(t);\n      },\n      sub(u, d) {\n        return o.push([u, a(d)]), () => i(u, d);\n      },\n      unsub: i,\n      unsubAll() {\n        o = o.filter(u => u[1].signal);\n      }\n    });\n  return p;\n}\nconst Yt = [];\nfunction Ts(t) {\n  Yt.length && Yt[Yt.length - 1].add(t);\n}\nconst As = /* @__PURE__ */at(!1),\n  [ce, Bs] = /* @__PURE__ */Ps(\"Bridge\", {\n    bgColor: \"#9147ff\",\n    textColor: \"white\",\n    shouldLog: As\n  }),\n  Rs = {\n    clipboard_text_received: A({\n      req_id: C(),\n      data: t => t === null ? t : C(!0)(t)\n    }, \"clipboard_text_received\"),\n    custom_method_invoked: A({\n      req_id: C(),\n      result: t => t,\n      error: C(!0)\n    }, \"custom_method_invoked\"),\n    popup_closed: B(\"popup_closed\", t => t ? A({\n      button_id: e => e == null ? void 0 : C()(e)\n    })()(t) : {}),\n    viewport_changed: A({\n      height: dt(),\n      width: t => t == null ? window.innerWidth : dt()(t),\n      is_state_stable: Nt(),\n      is_expanded: Nt()\n    }, \"viewport_changed\")\n  };\nfunction Os(t) {\n  const e = window,\n    [, n] = rt(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    Zt(e, \"resize\", () => {\n      t([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    Zt(e, \"message\", o => {\n      if (o.source !== e.parent) return;\n      let s;\n      try {\n        s = an()(o.data);\n      } catch {\n        return;\n      }\n      const {\n          eventType: r,\n          eventData: a\n        } = s,\n        i = Rs[r];\n      try {\n        const p = i ? i()(a) : a;\n        ce(\"Event received:\", p ? {\n          eventType: r,\n          eventData: p\n        } : {\n          eventType: r\n        }), t([r, p]);\n      } catch (p) {\n        Bs([`An error occurred processing the \"${r}\" event from the Telegram application.`, \"Please, file an issue here:\", \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"].join(`\n`), s, p);\n      }\n    }));\n  return n;\n}\nconst te = /* @__PURE__ */at(),\n  De = /* @__PURE__ */at();\nfunction bn() {\n  return De() || De.set(Os(te.set)), te;\n}\nconst Ft = /* @__PURE__ */at({});\nfunction mn(t) {\n  let e = Ft()[t];\n  return e || (e = /* @__PURE__ */at(void 0, {\n    equals() {\n      return !1;\n    }\n  }), bn().sub(n => {\n    n && n[0] === t && e.set(n[1]);\n  }), Ft.set({\n    ...Ft(),\n    [t]: e\n  })), e;\n}\nfunction S(t, e, n) {\n  return mn(t).sub(e, n);\n}\nconst Is = \"ERR_METHOD_UNSUPPORTED\",\n  Ms = \"ERR_RETRIEVE_LP_FAILED\",\n  Ds = \"ERR_METHOD_PARAMETER_UNSUPPORTED\",\n  xs = \"ERR_UNKNOWN_ENV\",\n  ks = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\",\n  Ns = /* @__PURE__ */at(\"https://web.telegram.org\");\nfunction ue(t, e) {\n  ce(\"Posting event:\", e ? {\n    eventType: t,\n    eventData: e\n  } : {\n    eventType: t\n  });\n  const n = window;\n  if (un(n)) {\n    n.TelegramWebviewProxy.postEvent(t, JSON.stringify(e));\n    return;\n  }\n  const o = JSON.stringify({\n    eventType: t,\n    eventData: e\n  });\n  if (Es()) return n.parent.postMessage(o, Ns());\n  const {\n    external: s\n  } = n;\n  if (A({\n    notify: cn()\n  })().isValid(s)) {\n    s.notify(o);\n    return;\n  }\n  throw new l(xs);\n}\nfunction le(t, e, n) {\n  n || (n = {});\n  const {\n      capture: o\n    } = n,\n    [s, r] = rt();\n  return new f(a => {\n    (Array.isArray(e) ? e : [e]).forEach(i => {\n      s(S(i, p => {\n        (!o || (Array.isArray(e) ? o({\n          event: i,\n          payload: p\n        }) : o(p))) && a(p);\n      }));\n    }), (n.postEvent || ue)(t, n.params);\n  }, n).finally(r);\n}\nfunction pe(t) {\n  return bs()(t);\n}\nfunction gn(t) {\n  return pe(t.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\"));\n}\nfunction Vs() {\n  return gn(window.location.href);\n}\nfunction js() {\n  const t = performance.getEntriesByType(\"navigation\")[0];\n  if (!t) throw new Error(\"Unable to get first navigation entry.\");\n  return gn(t.name);\n}\nconst Us = \"launchParams\";\nfunction Ls() {\n  return pe($(Us) || \"\");\n}\nfunction wn(t) {\n  P(\"launchParams\", /* @__PURE__ */ms(t));\n}\nfunction En(t) {\n  return t instanceof Error ? t.message + (t.cause ? `\n  ${En(t.cause)}` : \"\") : JSON.stringify(t);\n}\nfunction it() {\n  const t = [];\n  for (const e of [\n  // Try to retrieve launch parameters from the current location. This method can return\n  // nothing in case, location was changed, and then the page was reloaded.\n  Vs,\n  // Then, try using the lower level API - window.performance.\n  js,\n  // Finally, try to extract launch parameters from the session storage.\n  Ls]) try {\n    const n = e();\n    return wn(n), n;\n  } catch (n) {\n    t.push(n);\n  }\n  throw new l(Ms, [\"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\", \"📖 Refer to docs for more information:\", \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\", \"Collected errors:\", ...t.map(e => `— ${En(e)}`)].join(`\n`));\n}\nfunction Ci(t) {\n  if (t === \"simple\") try {\n    return it(), !0;\n  } catch {\n    return !1;\n  }\n  return f.withFn(async () => {\n    if (un(window)) return !0;\n    try {\n      return await le(\"web_app_request_theme\", \"theme_changed\", {\n        timeout: 100\n      }), !0;\n    } catch {\n      return !1;\n    }\n  }, t);\n}\nfunction ee(t, e) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({\n      eventType: t,\n      eventData: e\n    }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Ws(t, e) {\n  if (typeof e == \"string\") try {\n    const {\n      eventType: n\n    } = an()(e);\n    n === \"web_app_request_theme\" && ee(\"theme_changed\", {\n      theme_params: JSON.parse(/* @__PURE__ */rn(t))\n    }), n === \"web_app_request_viewport\" && ee(\"viewport_changed\", {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      is_state_stable: !0,\n      is_expanded: !0\n    });\n  } catch {}\n}\nfunction vi(t) {\n  var e;\n  const n = typeof t == \"string\" ? pe(t) : t;\n  wn(n);\n  const o = (e = window.TelegramWebviewProxy) == null ? void 0 : e.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(s, r) {\n      Ws(n.themeParams, JSON.stringify({\n        eventType: s,\n        eventData: r\n      })), o == null || o(s, r);\n    }\n  }, ce(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction qs() {\n  [[\"TelegramGameProxy_receiveEvent\"],\n  // Windows Phone.\n  [\"TelegramGameProxy\", \"receiveEvent\"],\n  // Desktop.\n  [\"Telegram\", \"WebView\", \"receiveEvent\"]\n  // Android and iOS.\n  ].forEach(t => {\n    let e = window;\n    t.forEach((n, o, s) => {\n      if (o === s.length - 1) {\n        e[n] = ee;\n        return;\n      }\n      n in e || (e[n] = {}), e = e[n];\n    });\n  });\n}\nfunction Hs() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach(t => {\n    delete window[t];\n  });\n}\nfunction K(t, e, n) {\n  mn(t).unsub(e, n);\n}\nfunction Pi(t, e) {\n  return bn().sub(t, e);\n}\nfunction $i(t, e) {\n  te.unsub(t, e);\n}\nfunction yn(t) {\n  return ({\n    req_id: e\n  }) => e === t;\n}\nfunction xe(t) {\n  return t.split(\".\").map(Number);\n}\nfunction Gs(t, e) {\n  const n = xe(t),\n    o = xe(e),\n    s = Math.max(n.length, o.length);\n  for (let r = 0; r < s; r += 1) {\n    const a = n[r] || 0,\n      i = o[r] || 0;\n    if (a !== i) return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction b(t, e) {\n  return Gs(t, e) <= 0;\n}\nfunction j(t, e, n) {\n  if (typeof n == \"string\") {\n    if (t === \"web_app_open_link\") {\n      if (e === \"try_instant_view\") return b(\"6.4\", n);\n      if (e === \"try_browser\") return b(\"7.6\", n);\n    }\n    if (t === \"web_app_set_header_color\" && e === \"color\") return b(\"6.9\", n);\n    if (t === \"web_app_close\" && e === \"return_back\") return b(\"7.6\", n);\n    if (t === \"web_app_setup_main_button\" && e === \"has_shine_effect\") return b(\"7.10\", n);\n  }\n  switch (t) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return b(\"6.1\", e);\n    case \"web_app_open_popup\":\n      return b(\"6.2\", e);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return b(\"6.4\", e);\n    case \"web_app_switch_inline_query\":\n      return b(\"6.7\", e);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return b(\"6.9\", e);\n    case \"web_app_setup_settings_button\":\n      return b(\"6.10\", e);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return b(\"7.2\", e);\n    case \"web_app_setup_swipe_behavior\":\n      return b(\"7.7\", e);\n    case \"web_app_share_to_story\":\n      return b(\"7.8\", e);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return b(\"7.10\", e);\n    default:\n      return [\"iframe_ready\", \"iframe_will_reload\", \"web_app_close\", \"web_app_data_send\", \"web_app_expand\", \"web_app_open_link\", \"web_app_ready\", \"web_app_request_theme\", \"web_app_request_viewport\", \"web_app_setup_main_button\", \"web_app_setup_closing_behavior\"].includes(t);\n  }\n}\nfunction zs(t, e) {\n  e || (e = \"strict\");\n  const n = typeof e == \"function\" ? e : o => {\n    const {\n      method: s,\n      version: r\n    } = o;\n    let a, i;\n    if (\"param\" in o ? (a = `Parameter \"${o.param}\" of \"${s}\" method is unsupported in Mini Apps version ${r}`, i = Ds) : (a = `Method \"${s}\" is unsupported in Mini Apps version ${r}`, i = Is), e === \"strict\") throw new l(i, a);\n    return console.warn(a);\n  };\n  return (o, s) => j(o, t) ? gs(s) && o === \"web_app_set_header_color\" && \"color\" in s && !j(o, \"color\", t) ? n({\n    version: t,\n    method: o,\n    param: \"color\"\n  }) : ue(o, s) : n({\n    version: t,\n    method: o\n  });\n}\nfunction Ys(t, e, n, o) {\n  return le(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...(o || {}),\n    params: {\n      method: t,\n      params: e,\n      req_id: n\n    },\n    capture: yn(n)\n  }).then(({\n    result: s,\n    error: r\n  }) => {\n    if (r) throw new l(ks, r);\n    return s;\n  });\n}\nfunction Fs() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction R() {\n  const t = Fs();\n  return !!t && t.type === \"reload\";\n}\nfunction ke(t, e) {\n  return t.startsWith(e) ? t : `${e}${t}`;\n}\nfunction Js(t) {\n  return new URL(typeof t == \"string\" ? t : [t.pathname || \"\", ke(t.search || \"\", \"?\"), ke(t.hash || \"\", \"#\")].join(\"\"), \"http://a\");\n}\nlet et;\nfunction Ks(t, e) {\n  et && et.set(t, e) || e();\n}\nfunction Qs(t) {\n  if (et) return t();\n  et = /* @__PURE__ */new Map();\n  try {\n    t();\n  } finally {\n    et.forEach(e => e()), et = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction c(t, e) {\n  e || (e = {});\n  const n = e.equals || Object.is;\n  let o = [],\n    s = t;\n  const r = u => {\n    if (!n(s, u)) {\n      const d = s;\n      s = u, Ks(p, () => {\n        [...o].forEach(([w, y]) => {\n          w(u, d), y && i(w, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const d = typeof u != \"object\" ? {\n      once: u\n    } : u;\n    return {\n      once: d.once || !1,\n      signal: d.signal || !1\n    };\n  }\n  const i = (u, d) => {\n      const w = a(d),\n        y = o.findIndex(([Z, G]) => Z === u && G.once === w.once && G.signal === w.signal);\n      y >= 0 && o.splice(y, 1);\n    },\n    p = Object.assign(function () {\n      return Xs(p), s;\n    }, {\n      destroy() {\n        o = [];\n      },\n      set: r,\n      reset() {\n        r(t);\n      },\n      sub(u, d) {\n        return o.push([u, a(d)]), () => i(u, d);\n      },\n      unsub: i,\n      unsubAll() {\n        o = o.filter(u => u[1].signal);\n      }\n    });\n  return p;\n}\nconst lt = [];\nfunction Xs(t) {\n  lt.length && lt[lt.length - 1].add(t);\n}\n// @__NO_SIDE_EFFECTS__\nfunction h(t, e) {\n  let n = /* @__PURE__ */new Set();\n  const o = /* @__PURE__ */c(r(), e);\n  function s() {\n    o.set(r());\n  }\n  function r() {\n    n.forEach(p => p.unsub(s, {\n      signal: !0\n    }));\n    const a = /* @__PURE__ */new Set();\n    let i;\n    lt.push(a);\n    try {\n      i = t();\n    } finally {\n      lt.pop();\n    }\n    return a.forEach(p => {\n      p.sub(s, {\n        signal: !0\n      });\n    }), n = a, i;\n  }\n  return Object.assign(function () {\n    return o();\n  }, {\n    destroy: o.destroy,\n    sub: o.sub,\n    unsub: o.unsub,\n    unsubAll: o.unsubAll\n  });\n}\nconst Zs = /* @__PURE__ */c(/* @__PURE__ */(() => {\n    let t = 0;\n    return () => (t += 1).toString();\n  })()),\n  Sn = /* @__PURE__ */c(ue),\n  Q = /* @__PURE__ */c(\"0.0\");\nfunction tr(t) {\n  t || (t = {});\n  const {\n      postEvent: e\n    } = t,\n    n = t.version || it().version;\n  Q.set(n), Sn.set(typeof e == \"function\" ? e : zs(n));\n}\nfunction Cn() {\n  return Zs()();\n}\nfunction Pt(t, e, n) {\n  return Ys(t, e, Cn(), {\n    ...(n || {}),\n    postEvent: _\n  });\n}\nconst O = (t, e, n) => (n || (n = {}), n.postEvent || (n.postEvent = _), le(t, e, n)),\n  _ = (t, e) => Sn()(t, e),\n  ct = \"ERR_POPUP_INVALID_PARAMS\",\n  vn = \"ERR_INVALID_HOSTNAME\",\n  er = \"ERR_INVALID_SLUG\",\n  nr = \"ERR_DATA_INVALID_SIZE\",\n  or = \"ERR_ACCESS_DENIED\",\n  T = \"ERR_ALREADY_CALLED\",\n  Pn = \"ERR_NOT_AVAILABLE\",\n  $n = \"ERR_NOT_SUPPORTED\",\n  sr = \"ERR_NOT_MOUNTED\";\n// @__NO_SIDE_EFFECTS__\nfunction g(t, e) {\n  function n() {\n    return typeof e == \"string\" ? j(e, Q()) : e();\n  }\n  return Object.assign((...o) => {\n    if (!n()) throw new l($n);\n    return t(...o);\n  }, {\n    isSupported: n\n  });\n}\n// @__NO_SIDE_EFFECTS__\nfunction N(t) {\n  return e => /* @__PURE__ */g(e, t);\n}\nfunction v(t, e) {\n  e(), t.sub(e);\n}\nfunction I(t) {\n  return /* @__PURE__ */h(() => j(t, Q()));\n}\nfunction _e(t, e) {\n  return (...n) => {\n    if (!e()) throw new l(sr);\n    return t(...n);\n  };\n}\n// @__NO_SIDE_EFFECTS__\nfunction q(t) {\n  return e => _e(e, t);\n}\nconst Tn = \"web_app_setup_back_button\",\n  An = \"back_button_pressed\",\n  Bn = \"backButton\",\n  ft = /* @__PURE__ */c(!1),\n  Rn = I(Tn),\n  de = /* @__PURE__ */N(Rn),\n  On = /* @__PURE__ */q(ft),\n  rr = On(() => {\n    z.set(!1);\n  }),\n  z = /* @__PURE__ */c(!1),\n  ar = de(() => {\n    ft() || (z.set(R() && $(Bn) || !1), v(z, In), ft.set(!0));\n  });\nfunction In() {\n  const t = z();\n  _(Tn, {\n    is_visible: t\n  }), P(Bn, t);\n}\nconst ir = de(t => S(An, t)),\n  cr = de(t => {\n    K(An, t);\n  }),\n  ur = On(() => {\n    z.set(!0);\n  });\nfunction lr() {\n  z.unsub(In), ft.set(!1);\n}\nconst Ti = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  hide: rr,\n  isMounted: ft,\n  isSupported: Rn,\n  isVisible: z,\n  mount: ar,\n  offClick: cr,\n  onClick: ir,\n  show: ur,\n  unmount: lr\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\n// @__NO_SIDE_EFFECTS__\nfunction Mn(t, e, {\n  isMounting: n,\n  isMounted: o,\n  mountError: s,\n  isSupported: r\n}) {\n  return /* @__PURE__ */g(a => {\n    if (o()) return f.resolve();\n    if (n()) throw new l(T);\n    return n.set(!0), f.withFn(i => t({\n      abortSignal: i\n    }), a).then(i => [!0, i], i => [!1, i]).then(i => {\n      Qs(() => {\n        if (n.set(!1), o.set(!0), i[0]) e(i[1]);else {\n          const p = i[1];\n          throw s.set(p), p;\n        }\n      });\n    });\n  }, r || (() => !0));\n}\nconst x = /* @__PURE__ */c(),\n  At = /* @__PURE__ */c(!1),\n  Bt = /* @__PURE__ */c(!1),\n  fe = /* @__PURE__ */c(!1),\n  Dn = /* @__PURE__ */c(!1),\n  xn = /* @__PURE__ */c(void 0);\nfunction he(t) {\n  return t.available ? {\n    available: !0,\n    tokenSaved: t.token_saved,\n    deviceId: t.device_id,\n    accessRequested: t.access_requested,\n    type: t.type,\n    accessGranted: t.access_granted\n  } : {\n    available: !1\n  };\n}\nconst Ne = \"web_app_biometry_get_info\",\n  pr = /* @__PURE__ */g(t => O(Ne, \"biometry_info_received\", t).then(he), Ne),\n  kn = \"web_app_biometry_request_auth\",\n  _r = \"web_app_biometry_request_access\",\n  dr = \"web_app_biometry_open_settings\",\n  fr = \"web_app_biometry_update_token\",\n  be = \"biometry_info_received\",\n  Nn = \"biometry\",\n  me = I(kn),\n  hr = /* @__PURE__ */N(me),\n  ge = /* @__PURE__ */q(fe),\n  br = ge(t => {\n    if (At()) return f.reject(new l(T));\n    const e = x();\n    return !e || !e.available ? f.reject(new l(Pn)) : (At.set(!0), t || (t = {}), O(kn, \"biometry_auth_requested\", {\n      ...t,\n      params: {\n        reason: (t.reason || \"\").trim()\n      }\n    }).then(n => {\n      const {\n        token: o\n      } = n;\n      return typeof o == \"string\" && x.set({\n        ...e,\n        token: o\n      }), n;\n    }).finally(() => {\n      At.set(!1);\n    }));\n  }),\n  mr = hr(() => {\n    _(dr);\n  }),\n  gr = ge(t => Bt() ? f.reject(new l(T)) : (Bt.set(!0), t || (t = {}), O(_r, be, {\n    ...t,\n    params: {\n      reason: t.reason || \"\"\n    }\n  }).then(he).then(e => {\n    if (!e.available) throw new l(Pn);\n    return x.set(e), e.accessGranted;\n  }).finally(() => {\n    Bt.set(!1);\n  }))),\n  wr = /* @__PURE__ */Mn(t => {\n    const e = R() && $(Nn);\n    return e || pr(t);\n  }, t => {\n    S(be, Vn), v(x, jn), x.set(t);\n  }, {\n    isMounted: fe,\n    mountError: xn,\n    isMounting: Dn,\n    isSupported: me\n  }),\n  Vn = t => {\n    x.set(he(t));\n  };\nfunction jn() {\n  const t = x();\n  t && P(Nn, t);\n}\nfunction Er() {\n  K(be, Vn), x.unsub(jn);\n}\nconst yr = ge(t => (t || (t = {}), O(fr, \"biometry_token_updated\", {\n    ...t,\n    params: {\n      token: t.token || \"\",\n      reason: t.reason\n    }\n  }).then(e => e.status))),\n  Ai = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    authenticate: br,\n    isAuthenticating: At,\n    isMounted: fe,\n    isMounting: Dn,\n    isRequestingAccess: Bt,\n    isSupported: me,\n    mount: wr,\n    mountError: xn,\n    openSettings: mr,\n    requestAccess: gr,\n    state: x,\n    unmount: Er,\n    updateToken: yr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Un = \"closingConfirmation\",\n  ht = /* @__PURE__ */c(!1),\n  Ln = /* @__PURE__ */q(ht),\n  Sr = Ln(() => {\n    Y.set(!1);\n  }),\n  Y = /* @__PURE__ */c(!1),\n  Cr = Ln(() => {\n    Y.set(!0);\n  });\nfunction vr() {\n  ht() || (Y.set(R() && $(Un) || !1), v(Y, Wn), ht.set(!0));\n}\nfunction Wn() {\n  const t = Y();\n  _(\"web_app_setup_closing_behavior\", {\n    need_confirmation: t\n  }), P(Un, t);\n}\nfunction Pr() {\n  Y.unsub(Wn), ht.set(!1);\n}\nconst Bi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    disableConfirmation: Sr,\n    enableConfirmation: Cr,\n    isConfirmationEnabled: Y,\n    isMounted: ht,\n    mount: vr,\n    unmount: Pr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  $r = \"web_app_invoke_custom_method\",\n  qn = I($r),\n  Ut = /* @__PURE__ */N(qn),\n  Tr = Ut((t, e) => {\n    const n = Array.isArray(t) ? t : [t];\n    return n.length ? Pt(\"deleteStorageValues\", {\n      keys: n\n    }, e).then() : f.resolve();\n  });\nfunction Ar(t, e) {\n  const n = Array.isArray(t) ? t : [t];\n  return n.length ? Pt(\"getStorageValues\", {\n    keys: n\n  }, e).then(o => {\n    const s = xt(Object.fromEntries(n.map(r => [r, D()])))()(o);\n    return Array.isArray(t) ? s : s[t];\n  }) : f.resolve(typeof t == \"string\" ? \"\" : {});\n}\nconst Br = Ut(Ar),\n  Rr = Ut(t => Pt(\"getStorageKeys\", {}, t).then(ss(D())())),\n  Or = Ut((t, e, n) => Pt(\"saveStorageValue\", {\n    key: t,\n    value: e\n  }, n).then()),\n  Ri = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    deleteItem: Tr,\n    getItem: Br,\n    getKeys: Rr,\n    isSupported: qn,\n    setItem: Or\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Lt = \"web_app_trigger_haptic_feedback\",\n  Hn = I(Lt),\n  we = /* @__PURE__ */N(Hn),\n  Ir = we(t => {\n    _(Lt, {\n      type: \"impact\",\n      impact_style: t\n    });\n  }),\n  Mr = we(t => {\n    _(Lt, {\n      type: \"notification\",\n      notification_type: t\n    });\n  }),\n  Dr = we(() => {\n    _(Lt, {\n      type: \"selection_change\"\n    });\n  }),\n  Oi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    impactOccurred: Ir,\n    isSupported: Hn,\n    notificationOccurred: Mr,\n    selectionChanged: Dr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Ee = /* @__PURE__ */c(void 0);\nfunction M(t) {\n  return /* @__PURE__ */h(() => {\n    const e = Ee();\n    return e ? e[t] : void 0;\n  });\n}\nconst Gn = M(\"authDate\"),\n  zn = M(\"canSendAfter\"),\n  xr = /* @__PURE__ */h(() => {\n    const t = Gn(),\n      e = zn();\n    return e && t ? new Date(t.getTime() + e * 1e3) : void 0;\n  }),\n  kr = M(\"chat\"),\n  Nr = M(\"chatType\"),\n  Vr = M(\"chatInstance\"),\n  jr = M(\"hash\"),\n  Ur = M(\"queryId\"),\n  Yn = /* @__PURE__ */c(),\n  Lr = M(\"receiver\");\nfunction Wr() {\n  const t = it();\n  Ee.set(t.initData), Yn.set(t.initDataRaw);\n}\nconst qr = M(\"startParam\"),\n  Hr = M(\"user\"),\n  Ii = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    authDate: Gn,\n    canSendAfter: zn,\n    canSendAfterDate: xr,\n    chat: kr,\n    chatInstance: Vr,\n    chatType: Nr,\n    hash: jr,\n    queryId: Ur,\n    raw: Yn,\n    receiver: Lr,\n    restore: Wr,\n    startParam: qr,\n    state: Ee,\n    user: Hr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction Mi(t) {\n  return Zo()(t);\n}\nconst Fn = \"web_app_open_invoice\",\n  Rt = /* @__PURE__ */c(!1),\n  Jn = I(Fn);\nasync function Kn(t, e, n) {\n  if (Rt()) throw new l(T);\n  let o;\n  if (e === \"url\") {\n    const {\n      hostname: s,\n      pathname: r\n    } = new URL(t, window.location.href);\n    if (s !== \"t.me\") throw new l(vn);\n    const a = r.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!a) throw new l(er);\n    [,, o] = a;\n  } else o = t, n = e;\n  return Rt.set(!0), O(Fn, \"invoice_closed\", {\n    ...n,\n    params: {\n      slug: o\n    },\n    capture: s => o === s.slug\n  }).then(s => s.status).finally(() => {\n    Rt.set(!1);\n  });\n}\nconst Gr = /* @__PURE__ */g(Kn, Jn),\n  Di = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    _open: Kn,\n    isOpened: Rt,\n    isSupported: Jn,\n    open: Gr\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction Qn(t) {\n  const e = Qe(t);\n  return Math.sqrt([0.299, 0.587, 0.114].reduce((n, o, s) => {\n    const r = parseInt(e.slice(1 + s * 2, 1 + (s + 1) * 2), 16);\n    return n + r * r * o;\n  }, 0)) < 120;\n}\nconst bt = /* @__PURE__ */c(!1),\n  Ot = /* @__PURE__ */c(!1),\n  V = /* @__PURE__ */c({});\nfunction m(t) {\n  return /* @__PURE__ */h(() => V()[t]);\n}\nconst zr = m(\"accentTextColor\"),\n  ye = m(\"bgColor\"),\n  Se = m(\"buttonColor\"),\n  Xn = m(\"buttonTextColor\"),\n  Zn = m(\"bottomBarBgColor\"),\n  Yr = m(\"destructiveTextColor\"),\n  Fr = m(\"headerBgColor\"),\n  Jr = m(\"hintColor\"),\n  Kr = /* @__PURE__ */h(() => {\n    const {\n      bgColor: t\n    } = V();\n    return !t || Qn(t);\n  }),\n  Qr = m(\"linkColor\"),\n  Vt = m(\"secondaryBgColor\"),\n  Xr = m(\"sectionBgColor\"),\n  Zr = m(\"sectionHeaderTextColor\"),\n  ta = m(\"sectionSeparatorColor\"),\n  ea = m(\"subtitleTextColor\"),\n  na = m(\"textColor\");\nfunction X(t) {\n  return /* @__PURE__ */h(() => $t()[t]);\n}\nconst ot = /* @__PURE__ */c({\n    hasShineEffect: !1,\n    isEnabled: !0,\n    isLoaderVisible: !1,\n    isVisible: !1,\n    text: \"Continue\"\n  }),\n  $t = /* @__PURE__ */h(() => {\n    const t = ot();\n    return {\n      ...t,\n      backgroundColor: t.backgroundColor || Se() || \"#2481cc\",\n      textColor: t.textColor || Xn() || \"#ffffff\"\n    };\n  }),\n  mt = /* @__PURE__ */c(!1),\n  oa = X(\"backgroundColor\"),\n  sa = X(\"hasShineEffect\"),\n  ra = X(\"isEnabled\"),\n  aa = X(\"isLoaderVisible\"),\n  ia = X(\"isVisible\"),\n  ca = X(\"text\"),\n  ua = X(\"textColor\"),\n  la = \"web_app_setup_main_button\",\n  to = \"main_button_pressed\",\n  eo = \"mainButton\",\n  pa = /* @__PURE__ */q(mt);\nfunction _a() {\n  if (!mt()) {\n    const t = R() && $(eo);\n    t && ot.set(t), ot.sub(no), v($t, oo), mt.set(!0);\n  }\n}\nfunction da(t) {\n  return S(to, t);\n}\nfunction fa(t) {\n  K(to, t);\n}\nfunction no(t) {\n  P(eo, t);\n}\nfunction oo() {\n  const t = $t();\n  t.text && _(la, {\n    color: t.backgroundColor,\n    has_shine_effect: t.hasShineEffect,\n    is_active: t.isEnabled,\n    is_progress_visible: t.isLoaderVisible,\n    is_visible: t.isVisible,\n    text: t.text,\n    text_color: t.textColor\n  });\n}\nconst ha = pa(t => {\n  ot.set({\n    ...ot(),\n    ...Object.fromEntries(Object.entries(t).filter(([, e]) => e !== void 0))\n  });\n});\nfunction ba() {\n  ot.unsub(no), $t.unsub(oo), mt.set(!1);\n}\nconst xi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  backgroundColor: oa,\n  hasShineEffect: sa,\n  isEnabled: ra,\n  isLoaderVisible: aa,\n  isMounted: mt,\n  isVisible: ia,\n  mount: _a,\n  offClick: fa,\n  onClick: da,\n  setParams: ha,\n  state: $t,\n  text: ca,\n  textColor: ua,\n  unmount: ba\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nfunction ma(t) {\n  return ns()(t);\n}\nconst so = \"themeParams\",\n  ro = \"theme_changed\",\n  ga = _e(t => {\n    if (Ot()) throw new l(T);\n    t || (t = o => `--tg-theme-${re(o)}`);\n    function e(o) {\n      Object.entries(V()).forEach(([s, r]) => {\n        r && o(s, r);\n      });\n    }\n    function n() {\n      e((o, s) => {\n        ae(t(o), s);\n      });\n    }\n    return n(), V.sub(n), Ot.set(!0), () => {\n      e(ie), V.unsub(n), Ot.set(!1);\n    };\n  }, bt);\nfunction ao() {\n  bt() || (S(ro, io), V.set(R() && $(so) || it().themeParams), bt.set(!0));\n}\nconst io = t => {\n  const e = ma(t.theme_params);\n  V.set(e), P(so, e);\n};\nfunction wa() {\n  K(ro, io), bt.set(!1);\n}\n// @__NO_SIDE_EFFECTS__\nfunction Ea(t, e) {\n  function n(o) {\n    const s = e[o];\n    return j(s[0], s[1], Q());\n  }\n  return Object.assign((...o) => {\n    for (const s in e) if (e[s][2](...o) && !n(s)) throw new l($n, `Parameter \"${s}\" is not supported`);\n    return t(...o);\n  }, t, {\n    supports: n\n  });\n}\n// @__NO_SIDE_EFFECTS__\nfunction co(t) {\n  return /* @__PURE__ */h(() => {\n    const e = t();\n    return Ct(e) ? e : e === \"bg_color\" ? ye() : Vt();\n  });\n}\nconst U = /* @__PURE__ */c(\"bg_color\"),\n  Ce = /* @__PURE__ */co(U),\n  L = /* @__PURE__ */c(\"bottom_bar_bg_color\"),\n  ve = /* @__PURE__ */h(() => {\n    const t = L();\n    return Ct(t) ? t : t === \"bottom_bar_bg_color\" ? Zn() || Vt() : t === \"secondary_bg_color\" ? Vt() : ye();\n  }),\n  W = /* @__PURE__ */c(\"bg_color\"),\n  uo = /* @__PURE__ */co(W),\n  gt = /* @__PURE__ */c(!1),\n  It = /* @__PURE__ */c(!1),\n  ya = /* @__PURE__ */h(() => {\n    const t = Ce();\n    return t ? Qn(t) : !1;\n  }),\n  lo = /* @__PURE__ */h(() => ({\n    backgroundColor: U(),\n    bottomBarColor: L(),\n    headerColor: W()\n  })),\n  Pe = \"web_app_set_background_color\",\n  $e = \"web_app_set_bottom_bar_color\",\n  jt = \"web_app_set_header_color\",\n  po = \"miniApp\",\n  _o = /* @__PURE__ */h(() => [Pe, $e, jt].some(t => j(t, Q()))),\n  Sa = /* @__PURE__ */N(_o),\n  Wt = /* @__PURE__ */q(gt),\n  Ca = Wt(t => {\n    if (It()) throw new l(T);\n    const [e, n] = rt();\n    function o(s, r) {\n      function a() {\n        ae(s, r() || null);\n      }\n      a(), e(r.sub(a), ie.bind(null, s));\n    }\n    return t || (t = s => `--tg-${re(s)}`), o(t(\"bgColor\"), Ce), o(t(\"bottomBarColor\"), ve), o(t(\"headerColor\"), uo), e(() => {\n      It.set(!1);\n    }), It.set(!0), n;\n  });\nfunction va(t) {\n  _(\"web_app_close\", {\n    return_back: t\n  });\n}\nconst Pa = Sa(() => {\n  if (!gt()) {\n    const t = R() && $(po);\n    ao(), U.set(t ? t.backgroundColor : \"bg_color\"), L.set(t ? t.bottomBarColor : \"bottom_bar_bg_color\"), W.set(t ? t.headerColor : \"bg_color\"), mo.isSupported() && v(U, fo), go.isSupported() && v(L, ho), wo.isSupported() && v(W, bo), gt.set(!0);\n  }\n});\nfunction fo() {\n  Te(), _(Pe, {\n    color: U()\n  });\n}\nfunction ho() {\n  Te(), _($e, {\n    color: L()\n  });\n}\nfunction bo() {\n  const t = W();\n  Te(), _(jt, Ct(t) ? {\n    color: t\n  } : {\n    color_key: t\n  });\n}\nfunction $a() {\n  _(\"web_app_ready\");\n}\nfunction Te() {\n  P(po, lo());\n}\nconst mo = /* @__PURE__ */g(Wt(t => {\n    U.set(t);\n  }), Pe),\n  go = /* @__PURE__ */g(Wt(t => {\n    L.set(t);\n  }), $e),\n  wo = /* @__PURE__ */Ea(/* @__PURE__ */g(Wt(t => {\n    W.set(t);\n  }), jt), {\n    color: [jt, \"color\", Ct]\n  });\nfunction Ta() {\n  U.unsub(fo), L.unsub(ho), W.unsub(bo), gt.set(!1);\n}\nconst ki = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n  __proto__: null,\n  backgroundColor: U,\n  backgroundColorRGB: Ce,\n  bindCssVars: Ca,\n  bottomBarColor: L,\n  bottomBarColorRGB: ve,\n  close: va,\n  headerColor: W,\n  headerColorRGB: uo,\n  isCssVarsBound: It,\n  isDark: ya,\n  isMounted: gt,\n  isSupported: _o,\n  mount: Pa,\n  ready: $a,\n  setBackgroundColor: mo,\n  setBottomBarColor: go,\n  setHeaderColor: wo,\n  state: lo,\n  unmount: Ta\n}, Symbol.toStringTag, {\n  value: \"Module\"\n}));\nfunction Aa(t) {\n  const e = t.message.trim(),\n    n = (t.title || \"\").trim(),\n    o = t.buttons || [];\n  if (n.length > 64) throw new l(ct, `Invalid title: ${n}`);\n  if (!e || e.length > 256) throw new l(ct, `Invalid message: ${e}`);\n  if (o.length > 3) throw new l(ct, `Invalid buttons count: ${o.length}`);\n  return {\n    title: n,\n    message: e,\n    buttons: o.length ? o.map((s, r) => {\n      const a = s.id || \"\";\n      if (a.length > 64) throw new l(ct, `Button with index ${r} has invalid id: ${a}`);\n      if (!s.type || s.type === \"default\" || s.type === \"destructive\") {\n        const i = s.text.trim();\n        if (!i || i.length > 64) throw new l(ct, `Button with index ${r} has invalid text: ${i}`);\n        return {\n          type: s.type,\n          text: i,\n          id: a\n        };\n      }\n      return {\n        type: s.type,\n        id: a\n      };\n    }) : [{\n      type: \"close\",\n      id: \"\"\n    }]\n  };\n}\nconst Eo = \"web_app_open_popup\",\n  yo = I(Eo),\n  Mt = /* @__PURE__ */c(!1),\n  Ba = /* @__PURE__ */g(async t => {\n    if (Mt()) throw new l(T);\n    Mt.set(!0);\n    try {\n      const {\n        button_id: e = null\n      } = await O(Eo, \"popup_closed\", {\n        ...t,\n        params: Aa(t)\n      });\n      return e;\n    } finally {\n      Mt.set(!1);\n    }\n  }, yo),\n  Ni = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    isOpened: Mt,\n    isSupported: yo,\n    open: Ba\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Ra = \"web_app_close_scan_qr_popup\",\n  So = \"web_app_open_scan_qr_popup\",\n  Oa = \"scan_qr_popup_closed\",\n  Ia = \"qr_text_received\",\n  Co = I(So),\n  vo = /* @__PURE__ */N(Co),\n  ne = vo(() => {\n    nt.set(!1), _(Ra);\n  }),\n  nt = /* @__PURE__ */c(!1);\nfunction Ma(t) {\n  return f.withFn(e => {\n    if (nt()) throw new l(T);\n    nt.set(!0), t || (t = {});\n    const {\n        onCaptured: n,\n        text: o,\n        capture: s\n      } = t,\n      [, r] = rt(\n      // Whenever the scanner was closed for some reason (by a developer or a user), we should\n      // resolve the promise with undefined.\n      nt.sub(() => {\n        a.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      S(Oa, () => {\n        nt.set(!1);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      S(Ia, i => {\n        n ? n(i.data) : (!s || s(i.data)) && (a.resolve(i.data), ne());\n      })),\n      a = new ut({\n        abortSignal: e\n      }).catch(ne).finally(r);\n    return (t.postEvent || _)(So, {\n      text: o\n    }), a;\n  }, t);\n}\nconst Da = vo(Ma),\n  Vi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    close: ne,\n    isOpened: nt,\n    isSupported: Co,\n    open: Da\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  }));\nfunction H(t) {\n  return /* @__PURE__ */h(() => Tt()[t]);\n}\nconst st = /* @__PURE__ */c({\n    hasShineEffect: !1,\n    isEnabled: !0,\n    isLoaderVisible: !1,\n    isVisible: !1,\n    position: \"left\",\n    text: \"Cancel\"\n  }),\n  Tt = /* @__PURE__ */h(() => {\n    const t = st();\n    return {\n      ...t,\n      backgroundColor: t.backgroundColor || ve() || \"#000000\",\n      textColor: t.textColor || Se() || \"#2481cc\"\n    };\n  }),\n  wt = /* @__PURE__ */c(!1),\n  xa = H(\"backgroundColor\"),\n  ka = H(\"hasShineEffect\"),\n  Na = H(\"isEnabled\"),\n  Va = H(\"isLoaderVisible\"),\n  ja = H(\"isVisible\"),\n  Ua = H(\"position\"),\n  La = H(\"text\"),\n  Wa = H(\"textColor\"),\n  Po = \"web_app_setup_secondary_button\",\n  $o = \"secondary_button_pressed\",\n  To = \"secondaryButton\",\n  Ao = I(Po),\n  Ae = /* @__PURE__ */N(Ao),\n  qa = /* @__PURE__ */q(wt),\n  Ha = Ae(() => {\n    if (!wt()) {\n      const t = R() && $(To);\n      t && st.set(t), st.sub(Bo), v(Tt, Ro), wt.set(!0);\n    }\n  }),\n  Ga = Ae(t => S($o, t)),\n  za = Ae(t => {\n    K($o, t);\n  });\nfunction Bo(t) {\n  P(To, t);\n}\nfunction Ro() {\n  const t = Tt();\n  t.text && _(Po, {\n    color: t.backgroundColor,\n    has_shine_effect: t.hasShineEffect,\n    is_active: t.isEnabled,\n    is_progress_visible: t.isLoaderVisible,\n    is_visible: t.isVisible,\n    position: t.position,\n    text: t.text,\n    text_color: t.textColor\n  });\n}\nconst Ya = qa(t => {\n  st.set({\n    ...st(),\n    ...Object.fromEntries(Object.entries(t).filter(([, e]) => e !== void 0))\n  });\n});\nfunction Fa() {\n  st.unsub(Bo), Tt.unsub(Ro), wt.set(!1);\n}\nconst ji = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    backgroundColor: xa,\n    hasShineEffect: ka,\n    isEnabled: Na,\n    isLoaderVisible: Va,\n    isMounted: wt,\n    isSupported: Ao,\n    isVisible: ja,\n    mount: Ha,\n    offClick: za,\n    onClick: Ga,\n    position: Ua,\n    setParams: Ya,\n    state: Tt,\n    text: La,\n    textColor: Wa,\n    unmount: Fa\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Oo = \"web_app_setup_settings_button\",\n  Io = \"settings_button_pressed\",\n  Mo = \"settingsButton\",\n  Et = /* @__PURE__ */c(!1),\n  Do = I(Oo),\n  Be = /* @__PURE__ */N(Do),\n  xo = /* @__PURE__ */q(Et),\n  Ja = xo(() => {\n    F.set(!1);\n  }),\n  F = /* @__PURE__ */c(!1),\n  Ka = Be(() => {\n    Et() || (F.set(R() && $(Mo) || !1), v(F, ko), Et.set(!0));\n  });\nfunction ko() {\n  const t = F();\n  _(Oo, {\n    is_visible: t\n  }), P(Mo, t);\n}\nconst Qa = Be(t => S(Io, t)),\n  Xa = Be(t => {\n    K(Io, t);\n  }),\n  Za = xo(() => {\n    F.set(!0);\n  });\nfunction ti() {\n  F.unsub(ko), Et.set(!1);\n}\nconst Ui = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    hide: Ja,\n    isMounted: Et,\n    isSupported: Do,\n    isVisible: F,\n    mount: Ka,\n    offClick: Xa,\n    onClick: Qa,\n    show: Za,\n    unmount: ti\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  No = \"web_app_setup_swipe_behavior\",\n  Vo = \"swipeBehavior\",\n  yt = /* @__PURE__ */c(!1),\n  jo = I(No),\n  ei = /* @__PURE__ */N(jo),\n  Uo = /* @__PURE__ */q(yt),\n  ni = Uo(() => {\n    J.set(!1);\n  }),\n  oi = Uo(() => {\n    J.set(!0);\n  }),\n  J = /* @__PURE__ */c(!0),\n  si = ei(() => {\n    yt() || (J.set(R() && $(Vo) || !1), v(J, Lo), yt.set(!0));\n  });\nfunction Lo() {\n  const t = J();\n  _(No, {\n    allow_vertical_swipe: t\n  }), P(Vo, t);\n}\nfunction ri() {\n  J.unsub(Lo), yt.set(!1);\n}\nconst Li = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    disableVertical: ni,\n    enableVertical: oi,\n    isMounted: yt,\n    isSupported: jo,\n    isVerticalEnabled: J,\n    mount: si,\n    unmount: ri\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Wi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    accentTextColor: zr,\n    backgroundColor: ye,\n    bindCssVars: ga,\n    bottomBarBgColor: Zn,\n    buttonColor: Se,\n    buttonTextColor: Xn,\n    destructiveTextColor: Yr,\n    headerBackgroundColor: Fr,\n    hintColor: Jr,\n    isCssVarsBound: Ot,\n    isDark: Kr,\n    isMounted: bt,\n    linkColor: Qr,\n    mount: ao,\n    secondaryBackgroundColor: Vt,\n    sectionBackgroundColor: Xr,\n    sectionHeaderTextColor: Zr,\n    sectionSeparatorColor: ta,\n    state: V,\n    subtitleTextColor: ea,\n    textColor: na,\n    unmount: wa\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  E = /* @__PURE__ */c({\n    height: 0,\n    width: 0,\n    isExpanded: !1,\n    stableHeight: 0\n  }),\n  Re = /* @__PURE__ */c(!1),\n  Dt = /* @__PURE__ */c(!1),\n  Wo = /* @__PURE__ */c(!1),\n  qo = /* @__PURE__ */c(void 0);\nfunction qt(t) {\n  return /* @__PURE__ */h(() => E()[t]);\n}\nconst ai = qt(\"height\"),\n  ii = qt(\"isExpanded\"),\n  ci = /* @__PURE__ */h(() => {\n    const t = E();\n    return t.height === t.stableHeight;\n  }),\n  ui = qt(\"stableHeight\"),\n  li = qt(\"width\");\nfunction pi(t) {\n  return O(\"web_app_request_viewport\", \"viewport_changed\", t).then(e => ({\n    height: e.height,\n    width: e.width,\n    isExpanded: e.is_expanded,\n    isStable: e.is_state_stable\n  }));\n}\nconst _i = _e(t => {\n  if (Dt()) throw new l(T);\n  t || (t = o => `--tg-viewport-${re(o)}`);\n  const e = [\"height\", \"width\", \"stableHeight\"];\n  function n() {\n    e.forEach(o => {\n      ae(t(o), `${E()[o]}px`);\n    });\n  }\n  return n(), E.sub(n), Dt.set(!0), () => {\n    e.forEach(ie), E.unsub(n), Dt.set(!1);\n  };\n}, Re);\nfunction di() {\n  _(\"web_app_expand\");\n}\nfunction Ho(t) {\n  return {\n    isExpanded: t.isExpanded,\n    height: Jt(t.height),\n    width: Jt(t.width),\n    stableHeight: Jt(t.stableHeight)\n  };\n}\nconst fi = /* @__PURE__ */Mn(t => {\n    const e = R() && $(\"viewport\");\n    if (e) return e;\n    if ([\"macos\", \"tdesktop\", \"unigram\", \"webk\", \"weba\", \"web\"].includes(it().platform)) {\n      const n = window;\n      return {\n        isExpanded: !0,\n        height: n.innerHeight,\n        width: n.innerWidth,\n        stableHeight: n.innerHeight\n      };\n    }\n    return t.timeout || (t.timeout = 1e3), pi(t).then(n => ({\n      height: n.height,\n      isExpanded: n.isExpanded,\n      stableHeight: n.isStable ? n.height : E().stableHeight,\n      width: n.width\n    }));\n  }, t => {\n    S(\"viewport_changed\", Go), v(E, zo), E.set(Ho(t));\n  }, {\n    isMounted: Re,\n    isMounting: Wo,\n    mountError: qo\n  }),\n  Go = t => {\n    E.set(Ho({\n      height: t.height,\n      width: t.width,\n      isExpanded: t.is_expanded,\n      stableHeight: t.is_state_stable ? t.height : E().stableHeight\n    }));\n  };\nfunction zo() {\n  P(\"viewport\", E());\n}\nfunction Jt(t) {\n  return Math.max(t, 0);\n}\nfunction hi() {\n  K(\"viewport_changed\", Go), E.unsub(zo);\n}\nconst qi = /* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({\n    __proto__: null,\n    bindCssVars: _i,\n    expand: di,\n    height: ai,\n    isCssVarsBound: Dt,\n    isExpanded: ii,\n    isMounted: Re,\n    isMounting: Wo,\n    isStable: ci,\n    mount: fi,\n    mountError: qo,\n    stableHeight: ui,\n    state: E,\n    unmount: hi,\n    width: li\n  }, Symbol.toStringTag, {\n    value: \"Module\"\n  })),\n  Ve = \"web_app_open_tg_link\";\nfunction Hi(t, e) {\n  e || (e = {}), _(\"web_app_open_link\", {\n    url: Js(t).toString(),\n    try_browser: e.tryBrowser,\n    try_instant_view: e.tryInstantView\n  });\n}\nfunction bi(t) {\n  const {\n    hostname: e,\n    pathname: n,\n    search: o\n  } = new URL(t, \"https://t.me\");\n  if (e !== \"t.me\") throw new l(vn);\n  if (!j(Ve, Q())) {\n    window.location.href = t;\n    return;\n  }\n  _(Ve, {\n    path_full: n + o\n  });\n}\nfunction Gi(t, e) {\n  bi(\"https://t.me/share/url?\" + new URLSearchParams({\n    url: t,\n    text: e || \"\"\n  }).toString().replace(/\\+/g, \"%20\"));\n}\nconst oe = \"web_app_request_phone\",\n  je = \"web_app_request_write_access\",\n  Kt = /* @__PURE__ */c(!1),\n  Qt = /* @__PURE__ */c(!1);\nfunction Ue(t) {\n  return t || (t = {}), Pt(\"getRequestedContact\", {}, {\n    ...t,\n    timeout: t.timeout || 5e3\n  }).then(Ke({\n    contact: xt({\n      userId: [\"user_id\", kt()],\n      phoneNumber: [\"phone_number\", D()],\n      firstName: [\"first_name\", D()],\n      lastName: [\"last_name\", D(!0)]\n    })(),\n    authDate: [\"auth_date\", Je()],\n    hash: D()\n  })());\n}\nconst zi = /* @__PURE__ */g(t => new f(async (e, n, o) => {\n    const s = {\n      postEvent: (t || {}).postEvent,\n      abortSignal: o\n    };\n    try {\n      return e(await Ue(s));\n    } catch {}\n    if ((await mi(s)) !== \"sent\") throw new l(or);\n    let a = 50;\n    for (; !o.aborted;) {\n      try {\n        return e(await Ue(s));\n      } catch {}\n      await vs(a), a += 50;\n    }\n  }, t), oe),\n  mi = /* @__PURE__ */g(t => {\n    if (Kt()) throw new l(T);\n    return Kt.set(!0), O(oe, \"phone_requested\", t).then(e => e.status).finally(() => {\n      Kt.set(!1);\n    });\n  }, oe),\n  Yi = /* @__PURE__ */g(t => {\n    if (Qt()) throw new l(T);\n    return Qt.set(!0), O(je, \"write_access_requested\", t).then(e => e.status).finally(() => {\n      Qt.set(!1);\n    });\n  }, je),\n  Le = \"web_app_read_text_from_clipboard\",\n  We = \"web_app_switch_inline_query\",\n  qe = \"web_app_share_to_story\",\n  Fi = /* @__PURE__ */g(t => {\n    const e = Cn();\n    return O(Le, \"clipboard_text_received\", {\n      ...t,\n      params: {\n        req_id: e\n      },\n      capture: yn(e)\n    }).then(({\n      data: n = null\n    }) => n);\n  }, Le);\nfunction Ji(t) {\n  const {\n    size: e\n  } = new Blob([t]);\n  if (!e || e > 4096) throw new l(nr);\n  _(\"web_app_data_send\", {\n    data: t\n  });\n}\nconst Ki = /* @__PURE__ */g((t, e) => {\n    e || (e = {}), (e.postEvent || _)(qe, {\n      text: e.text,\n      media_url: t,\n      widget_link: e.widgetLink\n    });\n  }, qe),\n  Qi = /* @__PURE__ */g((t, e) => {\n    _(We, {\n      query: t,\n      chat_types: e || []\n    });\n  }, () => j(We, Q()) && !!it().botInline);\nfunction Xi() {\n  return typeof window > \"u\";\n}\nfunction Zi(t) {\n  tr(t), qs();\n  const [e, n] = rt(S(\"reload_iframe\", () => {\n      _(\"iframe_will_reload\"), window.location.reload();\n    }), Hs),\n    {\n      acceptCustomStyles: o = !0\n    } = t || {};\n  if (o) {\n    const s = document.createElement(\"style\");\n    s.id = \"telegram-custom-styles\", document.head.appendChild(s), e(S(\"set_custom_style\", r => {\n      s.innerHTML = r;\n    }), () => {\n      document.head.removeChild(s);\n    });\n  }\n  return _(\"iframe_ready\", {\n    reload_supported: !0\n  }), n;\n}\nexport { Zs as $createRequestId, As as $debug, Sn as $postEvent, Ns as $targetOrigin, Q as $version, f as CancelablePromise, _n as ERR_ABORTED, or as ERR_ACCESS_DENIED, T as ERR_ALREADY_CALLED, dn as ERR_CANCELED, ks as ERR_CUSTOM_METHOD_ERR_RESPONSE, nr as ERR_DATA_INVALID_SIZE, vn as ERR_INVALID_HOSTNAME, er as ERR_INVALID_SLUG, Jo as ERR_INVALID_VALUE, Ds as ERR_METHOD_PARAMETER_UNSUPPORTED, Is as ERR_METHOD_UNSUPPORTED, Pn as ERR_NOT_AVAILABLE, sr as ERR_NOT_MOUNTED, $n as ERR_NOT_SUPPORTED, ze as ERR_PARSE, ct as ERR_POPUP_INVALID_PARAMS, Ms as ERR_RETRIEVE_LP_FAILED, fn as ERR_TIMED_OUT, Qo as ERR_UNEXPECTED_TYPE, Ko as ERR_UNEXPECTED_VALUE, xs as ERR_UNKNOWN_ENV, l as TypedError, Zt as addEventListener, br as authenticateBiometry, Ti as backButton, Ca as bindMiniAppCssVars, ga as bindThemeParamsCssVars, _i as bindViewportCssVars, Ai as biometry, xn as biometryMountError, x as biometryState, Xt as classNames, va as closeMiniApp, ne as closeQrScanner, Bi as closingBehavior, Ri as cloudStorage, Gs as compareVersions, zs as createPostEvent, qs as defineEventHandlers, Tr as deleteCloudStorageItem, ie as deleteCssVar, Sr as disableClosingConfirmation, ni as disableVerticalSwipes, ee as emitMiniAppsEvent, Cr as enableClosingConfirmation, oi as enableVerticalSwipes, di as expandViewport, Br as getCloudStorageItem, Rr as getCloudStorageKeys, Oi as hapticFeedback, Ir as hapticFeedbackImpactOccurred, Mr as hapticFeedbackNotificationOccurred, Dr as hapticFeedbackSelectionChanged, rr as hideBackButton, Ja as hideSettingsButton, Zi as init, Ii as initData, Gn as initDataAuthDate, zn as initDataCanSendAfter, xr as initDataCanSendAfterDate, kr as initDataChat, Vr as initDataChatInstance, Nr as initDataChatType, jr as initDataHash, Ur as initDataQueryId, Yn as initDataRaw, Lr as initDataReceiver, qr as initDataStartParam, Ee as initDataState, Hr as initDataUser, Di as invoice, Ys as invokeCustomMethod, yi as isAbortError, At as isAuthenticatingBiometry, ft as isBackButtonMounted, Rn as isBackButtonSupported, z as isBackButtonVisible, fe as isBiometryMounted, Dn as isBiometryMounting, me as isBiometrySupported, Si as isCanceledError, ht as isClosingBehaviorMounted, Y as isClosingConfirmationEnabled, qn as isCloudStorageSupported, Qn as isColorDark, Hn as isHapticFeedbackSupported, Es as isIframe, Rt as isInvoiceOpened, Jn as isInvoiceSupported, ra as isMainButtonEnabled, aa as isMainButtonLoaderVisible, mt as isMainButtonMounted, ia as isMainButtonVisible, It as isMiniAppCssVarsBound, ya as isMiniAppDark, gt as isMiniAppMounted, _o as isMiniAppSupported, Mt as isPopupOpened, yo as isPopupSupported, nt as isQrScannerOpened, Co as isQrScannerSupported, Ct as isRGB, ts as isRGBShort, Xe as isRecord, Bt as isRequestingBiometryAccess, Kt as isRequestingPhoneAccess, Qt as isRequestingWriteAccess, Xi as isSSR, Na as isSecondaryButtonEnabled, Va as isSecondaryButtonLoaderVisible, wt as isSecondaryButtonMounted, Ao as isSecondaryButtonSupported, ja as isSecondaryButtonVisible, Et as isSettingsButtonMounted, Do as isSettingsButtonSupported, F as isSettingsButtonVisible, yt as isSwipeBehaviorMounted, jo as isSwipeBehaviorSupported, Ci as isTMA, Ot as isThemeParamsCssVarsBound, Kr as isThemeParamsDark, bt as isThemeParamsMounted, Ei as isTimeoutError, J as isVerticalSwipesEnabled, Dt as isViewportCssVarsBound, ii as isViewportExpanded, Re as isViewportMounted, Wo as isViewportMounting, ci as isViewportStable, xi as mainButton, oa as mainButtonBackgroundColor, sa as mainButtonHasShineEffect, $t as mainButtonState, ca as mainButtonText, ua as mainButtonTextColor, wi as mergeClassNames, ki as miniApp, U as miniAppBackgroundColor, L as miniAppBottomBarColor, ve as miniAppBottomBarColorRGB, W as miniAppHeaderColor, uo as miniAppHeaderColorRGB, $a as miniAppReady, lo as miniAppState, vi as mockTelegramEnv, ar as mountBackButton, wr as mountBiometry, vr as mountClosingBehavior, _a as mountMainButton, Pa as mountMiniApp, Ha as mountSecondaryButton, Ka as mountSettingsButton, si as mountSwipeBehavior, ao as mountThemeParams, fi as mountViewport, K as off, cr as offBackButtonClick, fa as offMainButtonClick, za as offSecondaryButtonClick, Xa as offSettingsButtonClick, S as on, ir as onBackButtonClick, da as onMainButtonClick, Ga as onSecondaryButtonClick, Qa as onSettingsButtonClick, mr as openBiometrySettings, Gr as openInvoice, Hi as openLink, Ba as openPopup, Da as openQrScanner, bi as openTelegramLink, Mi as parseInitData, ma as parseThemeParams, Ni as popup, ue as postEvent, Vi as qrScanner, Fi as readTextFromClipboard, Hs as removeEventHandlers, le as request, pr as requestBiometry, gr as requestBiometryAccess, zi as requestContact, mi as requestPhoneAccess, Yi as requestWriteAccess, Wr as restoreInitData, it as retrieveLaunchParams, ji as secondaryButton, xa as secondaryButtonBackgroundColor, ka as secondaryButtonHasShineEffect, Ua as secondaryButtonPosition, Tt as secondaryButtonState, La as secondaryButtonText, Wa as secondaryButtonTextColor, Ji as sendData, gi as serializeLaunchParams, os as serializeThemeParams, Or as setCloudStorageItem, ae as setCssVar, ha as setMainButtonParams, mo as setMiniAppBackgroundColor, go as setMiniAppBottomBarColor, wo as setMiniAppHeaderColor, Ya as setSecondaryButtonParams, Ui as settingsButton, Ki as shareStory, Gi as shareURL, ur as showBackButton, Za as showSettingsButton, Pi as subscribe, j as supports, Li as swipeBehavior, Qi as switchInlineQuery, Wi as themeParams, zr as themeParamsAccentTextColor, ye as themeParamsBackgroundColor, Zn as themeParamsBottomBarBgColor, Se as themeParamsButtonColor, Xn as themeParamsButtonTextColor, Yr as themeParamsDestructiveTextColor, Fr as themeParamsHeaderBackgroundColor, Jr as themeParamsHintColor, Qr as themeParamsLinkColor, Vt as themeParamsSecondaryBackgroundColor, Xr as themeParamsSectionBackgroundColor, Zr as themeParamsSectionHeaderTextColor, ta as themeParamsSectionSeparatorColor, V as themeParamsState, ea as themeParamsSubtitleTextColor, na as themeParamsTextColor, Qe as toRGB, Fe as toRecord, lr as unmountBackButton, Er as unmountBiometry, Pr as unmountClosingBehavior, ba as unmountMainButton, Ta as unmountMiniApp, Fa as unmountSecondaryButton, ti as unmountSettingsButton, ri as unmountSwipeBehavior, wa as unmountThemeParams, hi as unmountViewport, $i as unsubscribe, yr as updateBiometryToken, qi as viewport, ai as viewportHeight, qo as viewportMountError, ui as viewportStableHeight, E as viewportState, li as viewportWidth };","map":{"version":3,"names":["He","Error","constructor","e","n","o","message","cause","type","Object","setPrototypeOf","prototype","Ge","t","replace","toLowerCase","Fo","toUpperCase","Jo","Ko","Qo","ze","Ye","s","r","a","i","pt","Fe","JSON","parse","Array","isArray","k","assign","isValid","xt","St","stringify","Xo","String","D","toString","kt","Number","isNaN","Je","Date","Ke","URLSearchParams","get","Gt","Zo","addedToAttachmentMenu","allowsWriteToPm","firstName","id","isBot","isPremium","languageCode","lastName","photoUrl","username","authDate","canSendAfter","chat","title","chatInstance","chatType","hash","queryId","receiver","startParam","user","Ct","test","ts","Qe","repeat","match","slice","reduce","parseInt","length","es","ns","entries","os","fromEntries","map","gi","initDataRaw","showSettings","botInline","set","platform","themeParams","version","ss","Xe","Xt","filter","Boolean","join","wi","forEach","_t","Ze","tn","rs","as","is","cs","en","nn","on","B","A","vt","Nt","C","dt","us","sn","zt","ls","ps","_s","ds","fs","hs","rn","bs","initData","ms","an","eventType","eventData","cn","gs","ws","TelegramWebviewProxy","postEvent","un","Es","window","self","top","ys","defineProperty","Ss","je","enumerable","configurable","writable","value","ln","te","pn","Zt","addEventListener","removeEventListener","rt","flat","push","bind","Cs","l","se","_n","dn","fn","Oe","Ei","yi","Si","Ie","reject","f","Promise","p","abortSignal","u","aborted","reason","d","w","y","tt","Yo","Z","AbortController","signal","G","abort","timeout","Ht","setTimeout","clearTimeout","withFn","then","resolve","cancel","catch","finally","Me","ut","vs","hn","P","sessionStorage","setItem","$","getItem","re","Ps","textColor","bgColor","shouldLog","console","Intl","DateTimeFormat","hour","minute","second","fractionalSecondDigits","timeZone","format","ae","document","documentElement","style","setProperty","ie","removeProperty","$s","at","equals","once","findIndex","splice","Ts","destroy","reset","sub","unsub","unsubAll","Yt","add","As","ce","Bs","Rs","clipboard_text_received","req_id","data","custom_method_invoked","result","error","popup_closed","button_id","viewport_changed","height","width","innerWidth","is_state_stable","is_expanded","Os","innerHeight","source","parent","De","bn","Ft","mn","S","Is","Ms","Ds","xs","ks","Ns","ue","postMessage","external","notify","le","capture","event","payload","params","pe","gn","Vs","location","href","js","performance","getEntriesByType","name","Us","Ls","wn","En","it","Ci","ee","dispatchEvent","MessageEvent","Ws","theme_params","vi","qs","Hs","K","Pi","$i","yn","xe","split","Gs","Math","max","b","j","includes","zs","method","param","warn","Ys","Fs","R","ke","startsWith","Js","URL","pathname","search","et","Ks","Qs","Map","c","Xs","lt","h","Set","pop","Zs","Sn","Q","tr","Cn","Pt","_","O","request","ct","vn","er","nr","or","T","Pn","$n","sr","g","isSupported","N","v","I","_e","q","Tn","An","Bn","ft","Rn","de","On","rr","z","ar","In","is_visible","ir","cr","ur","lr","Mn","isMounting","isMounted","mountError","x","At","Bt","fe","Dn","xn","he","available","tokenSaved","token_saved","deviceId","device_id","accessRequested","access_requested","accessGranted","access_granted","Ne","pr","kn","_r","dr","fr","be","Nn","me","hr","ge","br","trim","token","mr","gr","wr","Vn","jn","Er","yr","status","Ai","freeze","Un","ht","Ln","Sr","Y","Cr","vr","Wn","need_confirmation","Pr","$r","qn","Ut","Tr","keys","Ar","Br","Rr","Or","key","Ri","Lt","Hn","we","Ir","impact_style","Mr","notification_type","Dr","Oi","Ee","M","Gn","zn","xr","getTime","kr","Nr","Vr","jr","Ur","Yn","Lr","Wr","qr","Hr","Ii","Mi","Fn","Rt","Jn","Kn","hostname","slug","Gr","Di","Qn","sqrt","bt","Ot","V","m","zr","ye","Se","Xn","Zn","Yr","Fr","Jr","Kr","Qr","Vt","Xr","Zr","ta","ea","na","X","$t","ot","hasShineEffect","isEnabled","isLoaderVisible","isVisible","text","backgroundColor","mt","oa","sa","ra","aa","ia","ca","ua","la","to","eo","pa","_a","no","oo","da","fa","color","has_shine_effect","is_active","is_progress_visible","text_color","ha","ba","ma","so","ro","ga","ao","io","wa","Ea","supports","co","U","Ce","L","ve","W","uo","gt","It","ya","lo","bottomBarColor","headerColor","Pe","$e","jt","po","_o","some","Sa","Wt","Ca","va","return_back","Pa","mo","fo","go","ho","wo","bo","Te","color_key","$a","Ta","Aa","buttons","Eo","yo","Mt","Ba","Ni","Ra","So","Oa","Ia","Co","vo","ne","nt","Ma","onCaptured","Da","Vi","H","Tt","st","position","wt","xa","ka","Na","Va","ja","Ua","La","Wa","Po","$o","To","Ao","Ae","qa","Ha","Bo","Ro","Ga","za","Ya","Fa","Oo","Io","Mo","Et","Do","Be","xo","Ja","F","Ka","ko","Qa","Xa","Za","ti","No","Vo","yt","jo","ei","Uo","ni","J","oi","si","Lo","allow_vertical_swipe","ri","E","isExpanded","stableHeight","Re","Dt","Wo","qo","qt","ai","ii","ci","ui","li","pi","isStable","_i","di","Ho","Jt","fi","Go","zo","hi","Ve","Hi","url","try_browser","tryBrowser","try_instant_view","tryInstantView","bi","path_full","Gi","oe","Kt","Qt","Ue","contact","userId","phoneNumber","zi","mi","Yi","Le","We","qe","Fi","Ji","size","Blob","Ki","media_url","widget_link","widgetLink","Qi","query","chat_types","Xi","Zi","reload","acceptCustomStyles","createElement","head","appendChild","innerHTML","removeChild","reload_supported"],"sources":["C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\transformers\\dist\\index.js","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\classnames\\classNames.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\classnames\\mergeClassNames.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\bridge\\dist\\index.js","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\navigation\\dist\\index.js","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\signals\\dist\\index.js","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\globals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\errors.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\withIsSupported.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWithIsSupported.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\utils\\subAndCall.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createIsSupported.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\withIsMounted.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\createWithIsMounted.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\back-button\\back-button.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\createMountFn.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\signals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\eventToState.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\requestBiometry.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\biometry\\methods.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\closing-behavior\\closing-behavior.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\cloud-storage\\cloud-storage.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\haptic-feedback\\haptic-feedback.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\init-data\\init-data.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\init-data\\parseInitData.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\invoice\\invoice.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\utils\\isColorDark.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\theme-params\\signals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\main-button\\signals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\main-button\\methods.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\theme-params\\parseThemeParams.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\theme-params\\methods.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\toolkit\\withSupports.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\mini-app\\signals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\mini-app\\methods.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\popup\\prepareParams.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\popup\\popup.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\qr-scanner\\qr-scanner.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\secondary-button\\signals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\secondary-button\\methods.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\settings-button\\settings-button.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\swipe-behavior\\swipe-behavior.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\viewport\\signals.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\viewport\\static.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\components\\viewport\\methods.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\links\\links.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\privacy\\privacy.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\scopes\\utilities\\uncategorized\\uncategorized.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\utils\\isSSR.ts","C:\\Users\\kurma\\Documents\\Documents\\smart-table\\node_modules\\@telegram-apps\\sdk\\src\\init.ts"],"sourcesContent":["class i extends Error {\n  constructor(e, r, a) {\n    super(\n      typeof r == \"object\" ? r.message : r || e,\n      {\n        cause: typeof r == \"object\" ? r.cause : a\n      }\n    ), this.type = e, Object.setPrototypeOf(this, i.prototype);\n  }\n}\nfunction b(t) {\n  return t.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nfunction E(t) {\n  return t.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\nconst R = \"ERR_INVALID_VALUE\", S = \"ERR_UNEXPECTED_VALUE\", w = \"ERR_UNEXPECTED_TYPE\", h = \"ERR_PARSE\";\nfunction y(t, e) {\n  const r = {};\n  for (const a in t) {\n    const n = t[a];\n    if (!n)\n      continue;\n    let o, c;\n    typeof n == \"function\" ? (o = a, c = n) : [o, c] = n;\n    try {\n      const p = c(e(o));\n      p !== void 0 && (r[a] = p);\n    } catch (p) {\n      throw new i(\n        h,\n        `Parser for \"${a}\" property failed${o === a ? \"\" : `. Source field: \"${o}\"`}`,\n        p\n      );\n    }\n  }\n  return r;\n}\nfunction d(t) {\n  let e = t;\n  if (typeof e == \"string\")\n    try {\n      e = JSON.parse(e);\n    } catch (r) {\n      throw new i(R, { cause: r });\n    }\n  if (typeof e != \"object\" || !e || Array.isArray(e))\n    throw new i(S);\n  return e;\n}\nfunction s(t, e) {\n  return (r) => {\n    const a = (n) => {\n      if (!(r && n === void 0))\n        try {\n          return e(n);\n        } catch (o) {\n          throw new i(h, {\n            message: `\"${t}\" transformer failed to parse the value`,\n            cause: o\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      a,\n      {\n        isValid(n) {\n          try {\n            return a(n), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(t, e) {\n  return s(e || \"object\", (r) => {\n    const a = d(r);\n    return y(t, (n) => a[n]);\n  });\n}\nfunction f(t) {\n  throw new i(w, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst A = s(\"boolean\", (t) => {\n  if (typeof t == \"boolean\")\n    return t;\n  const e = String(t);\n  if (e === \"1\" || e === \"true\")\n    return !0;\n  if (e === \"0\" || e === \"false\")\n    return !1;\n  f(t);\n}), u = s(\"string\", (t) => {\n  if (typeof t == \"string\" || typeof t == \"number\")\n    return t.toString();\n  f(t);\n}), g = s(\"number\", (t) => {\n  if (typeof t == \"number\")\n    return t;\n  if (typeof t == \"string\") {\n    const e = Number(t);\n    if (!Number.isNaN(e))\n      return e;\n  }\n  f(t);\n}), D = s(\"date\", (t) => t instanceof Date ? t : new Date(g()(t) * 1e3));\nfunction P(t, e) {\n  return s(e || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && f(r);\n    const a = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return y(t, (n) => {\n      const o = a.get(n);\n      return o === null ? void 0 : o;\n    });\n  });\n}\nfunction m(t) {\n  for (const e in t)\n    t[e] = [b(e), t[e]];\n  return t;\n}\nconst U = (t) => {\n  const e = g(), r = g(!0), a = u(), n = u(!0), o = A(!0), c = l(m({\n    addedToAttachmentMenu: o,\n    allowsWriteToPm: o,\n    firstName: a,\n    id: e,\n    isBot: o,\n    isPremium: o,\n    languageCode: n,\n    lastName: n,\n    photoUrl: n,\n    username: n\n  }), \"User\")(!0);\n  return P(\n    m({\n      authDate: D(),\n      canSendAfter: r,\n      chat: l(\n        m({\n          id: e,\n          type: a,\n          title: a,\n          photoUrl: n,\n          username: n\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: n,\n      chatType: n,\n      hash: a,\n      queryId: n,\n      receiver: c,\n      startParam: n,\n      user: c\n    }),\n    \"initData\"\n  )(t);\n};\nfunction N(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction O(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction W(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (N(e))\n    return e;\n  if (O(e)) {\n    let a = \"#\";\n    for (let n = 0; n < 3; n += 1)\n      a += e[1 + n].repeat(2);\n    return a;\n  }\n  const r = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((a, n) => {\n    const o = parseInt(n, 10).toString(16);\n    return a + (o.length === 1 ? \"0\" : \"\") + o;\n  }, \"#\");\n}\nconst _ = s(\"rgb\", (t) => W(u()(t))), T = s(\n  \"themeParams\",\n  (t) => {\n    const e = _(!0);\n    return Object.entries(d(t)).reduce((r, [a, n]) => (r[E(a)] = e(n), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction V(t) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(t).map(([e, r]) => [b(e), r])\n    )\n  );\n}\nconst $ = (t) => {\n  const e = u(), r = u(!0), a = A(!0);\n  return P({\n    botInline: [\"tgWebAppBotInline\", a],\n    initData: [\"tgWebAppData\", U(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", e],\n    showSettings: [\"tgWebAppShowSettings\", a],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", T()],\n    version: [\"tgWebAppVersion\", e]\n  }, \"launchParams\")(t);\n};\n// @__NO_SIDE_EFFECTS__\nfunction j(t) {\n  const { initDataRaw: e, startParam: r, showSettings: a, botInline: n } = t, o = new URLSearchParams();\n  return o.set(\"tgWebAppPlatform\", t.platform), o.set(\"tgWebAppThemeParams\", /* @__PURE__ */ V(t.themeParams)), o.set(\"tgWebAppVersion\", t.version), e && o.set(\"tgWebAppData\", e), r && o.set(\"tgWebAppStartParam\", r), typeof a == \"boolean\" && o.set(\"tgWebAppShowSettings\", a ? \"1\" : \"0\"), typeof n == \"boolean\" && o.set(\"tgWebAppBotInline\", n ? \"1\" : \"0\"), o.toString();\n}\nconst L = l({\n  eventType: u(),\n  eventData: (t) => t\n}, \"miniAppsMessage\");\nfunction I(t, e) {\n  return s(e || \"array\", (r) => {\n    let a;\n    if (Array.isArray(r))\n      a = r;\n    else if (typeof r == \"string\")\n      try {\n        const n = JSON.parse(r);\n        Array.isArray(n) && (a = n);\n      } catch {\n      }\n    return a || f(r), a.map(t);\n  });\n}\nconst C = s(\"fn\", (t) => {\n  if (typeof t == \"function\")\n    return t;\n  f(t);\n});\nfunction B(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nexport {\n  R as ERR_INVALID_VALUE,\n  h as ERR_PARSE,\n  w as ERR_UNEXPECTED_TYPE,\n  S as ERR_UNEXPECTED_VALUE,\n  I as array,\n  A as boolean,\n  s as createTransformerGen,\n  D as date,\n  C as fn,\n  U as initData,\n  N as isRGB,\n  O as isRGBShort,\n  B as isRecord,\n  $ as launchParams,\n  L as miniAppsMessage,\n  g as number,\n  l as object,\n  _ as rgb,\n  P as searchParams,\n  j as serializeLaunchParams,\n  V as serializeThemeParams,\n  u as string,\n  T as themeParams,\n  W as toRGB,\n  d as toRecord\n};\n//# sourceMappingURL=index.js.map\n","import { isRecord } from '@telegram-apps/transformers';\n\n/**\n * Function which joins passed values with space following these rules:\n * 1. If value is non-empty string, it will be added to output.\n * 2. If value is object, only those keys will be added, which values are truthy.\n * 3. If value is array, classNames will be called with this value spread.\n * 4. All other values are ignored.\n *\n * You can find this function to similar one from the package {@link https://www.npmjs.com/package/classnames|classnames}.\n * @param values - values array.\n * @returns Final class name.\n */\nexport function classNames(...values: any[]): string {\n  return values\n    .map((value) => {\n      if (typeof value === 'string') {\n        return value;\n      }\n\n      if (isRecord(value)) {\n        return classNames(Object.entries(value).map((entry) => entry[1] && entry[0]));\n      }\n\n      if (Array.isArray(value)) {\n        return classNames(...value);\n      }\n    })\n    .filter(Boolean)\n    .join(' ');\n}\n","import { isRecord } from '@telegram-apps/transformers';\n\nimport { classNames } from './classNames.js';\n\ntype UnionStringKeys<U> = U extends U\n  ? { [K in keyof U]-?: U[K] extends string | undefined ? K : never }[keyof U]\n  : never;\n\ntype UnionRequiredKeys<U> = U extends U\n  ? { [K in UnionStringKeys<U>]: ({} extends Pick<U, K> ? never : K) }[UnionStringKeys<U>]\n  : never;\n\ntype UnionOptionalKeys<U> = Exclude<UnionStringKeys<U>, UnionRequiredKeys<U>>;\n\nexport type MergeClassNames<Tuple extends any[]> =\n// Removes all types from union that will be ignored by the mergeClassNames function.\n  Exclude<Tuple[number], number | string | null | undefined | any[] | boolean> extends infer Union\n    ?\n    & { [K in UnionRequiredKeys<Union>]: string; }\n    & { [K in UnionOptionalKeys<Union>]?: string; }\n    : never;\n\n/**\n * Merges two sets of classnames.\n *\n * The function expects to pass an array of objects with values that could be passed to\n * the `classNames` function.\n * @returns An object with keys from all objects with merged values.\n * @see classNames\n */\nexport function mergeClassNames<T extends any[]>(...partials: T): MergeClassNames<T> {\n  return partials.reduce<MergeClassNames<T>>((acc, partial) => {\n    if (isRecord(partial)) {\n      Object.entries(partial).forEach(([key, value]) => {\n        const className = classNames((acc as any)[key], value);\n        if (className) {\n          (acc as any)[key] = className;\n        }\n      });\n    }\n    return acc;\n  }, {} as MergeClassNames<T>);\n}\n","let v = class H extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, H.prototype);\n  }\n};\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", de = \"ERR_UNEXPECTED_VALUE\", me = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const n = {};\n  for (const r in e) {\n    const o = e[r];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = r, a = o) : [s, a] = o;\n    try {\n      const i = a(t(s));\n      i !== void 0 && (n[r] = i);\n    } catch (i) {\n      throw new v(\n        K,\n        `Parser for \"${r}\" property failed${s === r ? \"\" : `. Source field: \"${s}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new v(he, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new v(de);\n  return t;\n}\nfunction g(e, t) {\n  return (n) => {\n    const r = (o) => {\n      if (!(n && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new v(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      r,\n      {\n        isValid(o) {\n          try {\n            return r(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (n) => {\n    const r = Z(n);\n    return V(e, (o) => r[o]);\n  });\n}\nfunction R(e) {\n  throw new v(me, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && R(n);\n    const r = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return V(e, (o) => {\n      const s = r.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction U(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), n = P(!0), r = _(), o = _(!0), s = $(!0), a = l(U({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: r,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    U({\n      authDate: Ee(),\n      canSendAfter: n,\n      chat: l(\n        U({\n          id: t,\n          type: r,\n          title: r,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: r,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let r = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      r += t[1 + o].repeat(2);\n    return r;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((r, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return r + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), Se = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((n, [r, o]) => (n[we(r)] = t(o), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction X(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [G(t), n])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), n = _(!0), r = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", r],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", r],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", Se()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction $e(e) {\n  const { initDataRaw: t, startParam: n, showSettings: r, botInline: o } = e, s = new URLSearchParams();\n  return s.set(\"tgWebAppPlatform\", e.platform), s.set(\"tgWebAppThemeParams\", /* @__PURE__ */ X(e.themeParams)), s.set(\"tgWebAppVersion\", e.version), t && s.set(\"tgWebAppData\", t), n && s.set(\"tgWebAppStartParam\", n), typeof r == \"boolean\" && s.set(\"tgWebAppShowSettings\", r ? \"1\" : \"0\"), typeof o == \"boolean\" && s.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), s.toString();\n}\nconst Y = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Q = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction Ne(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Q() })()\n});\nfunction ee(e) {\n  return Ce().isValid(e);\n}\nfunction De() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar Ue = Object.defineProperty, je = (e, t, n) => t in e ? Ue(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, te = (e, t, n) => je(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nclass b extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction x(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction L(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction xe(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction W(e) {\n  return (t) => xe(t, e);\n}\nconst ne = \"ERR_ABORTED\", re = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(ne, { cause: e });\n}\nconst ot = W(oe), st = W(ne), at = W(re);\nfunction q(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s, a;\n    super((i, c) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return c(M(u.reason));\n      const [f, h] = L(), d = (m) => (...ge) => (h(), m(...ge)), T = new AbortController(), { signal: S } = T;\n      a = d((m) => {\n        T.abort(m), c(m);\n      }), s = d(i), u && f(\n        x(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const m = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(m);\n        });\n      }\n      r && r(s, a, S);\n    }), te(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new w((r, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(r, o) : r(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(re));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return q(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return q(super.then(t, n), this);\n  }\n}\nfunction F(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass A extends w {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s;\n    super((a, i, c) => {\n      s = a, r && r(a, i, c);\n    }, o), te(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new A(\n      (r, o, s) => w.withFn(t, { abortSignal: s }).then(r, o),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new A((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new A((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return F(super.then(t, n), this);\n  }\n}\nfunction it(e, t) {\n  return new w((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction ke(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction Le(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction pt(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction We(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: r,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...i) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const c = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${c};background-color: lightblue;color:black`,\n      \"\",\n      `${c};${n ? `color:${n};` : \"\"}${r ? `background-color:${r}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction ft(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction _t(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Oe(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction E(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let r = [], o = e;\n  const s = (u) => {\n    if (!n(o, u)) {\n      const f = o;\n      o = u, Oe(c, () => {\n        [...r].forEach(([h, d]) => {\n          h(u, f), d && i(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (u, f) => {\n    const h = a(f), d = r.findIndex(([T, S]) => T === u && S.once === h.once && S.signal === h.signal);\n    d >= 0 && r.splice(d, 1);\n  }, c = Object.assign(\n    function() {\n      return Ie(c), o;\n    },\n    {\n      destroy() {\n        r = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return r.push([u, a(f)]), () => i(u, f);\n      },\n      unsub: i,\n      unsubAll() {\n        r = r.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return c;\n}\nconst j = [];\nfunction Ie(e) {\n  j.length && j[j.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ E(!1), [O, Me] = /* @__PURE__ */ We(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), qe = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Fe(e) {\n  const t = window, [, n] = L(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    x(t, \"resize\", () => {\n      e([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    x(t, \"message\", (r) => {\n      if (r.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = Y()(r.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, i = qe[s];\n      try {\n        const c = i ? i()(a) : a;\n        O(\"Event received:\", c ? { eventType: s, eventData: c } : { eventType: s }), e([s, c]);\n      } catch (c) {\n        Me(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          c\n        );\n      }\n    })\n  );\n  return n;\n}\nconst N = /* @__PURE__ */ E(), C = /* @__PURE__ */ E();\nfunction ie() {\n  return C() || C.set(Fe(N.set)), N;\n}\nconst y = /* @__PURE__ */ E({});\nfunction ce(e) {\n  let t = y()[e];\n  return t || (t = /* @__PURE__ */ E(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ie().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), y.set({ ...y(), [e]: t })), t;\n}\nfunction Je(e, t, n) {\n  return ce(e).sub(t, n);\n}\nconst Be = \"ERR_METHOD_UNSUPPORTED\", He = \"ERR_RETRIEVE_LP_FAILED\", Ge = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ke = \"ERR_UNKNOWN_ENV\", Ve = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ E(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (ee(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const r = JSON.stringify({ eventType: e, eventData: t });\n  if (De())\n    return n.parent.postMessage(r, ue());\n  const { external: o } = n;\n  if (l({ notify: Q() })().isValid(o)) {\n    o.notify(r);\n    return;\n  }\n  throw new b(Ke);\n}\nfunction fe(e, t, n) {\n  n || (n = {});\n  const { capture: r } = n, [o, s] = L();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      o(\n        Je(i, (c) => {\n          (!r || (Array.isArray(t) ? r({\n            event: i,\n            payload: c\n          }) : r(c))) && a(c);\n        })\n      );\n    }), (n.postEvent || pe)(e, n.params);\n  }, n).finally(s);\n}\nfunction I(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return I(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ze() {\n  return _e(window.location.href);\n}\nfunction ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst Xe = \"launchParams\";\nfunction Ye() {\n  return I(Le(Xe) || \"\");\n}\nfunction le(e) {\n  ke(\"launchParams\", /* @__PURE__ */ $e(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Qe() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ze,\n    // Then, try using the lower level API - window.performance.\n    ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Ye\n  ])\n    try {\n      const n = t();\n      return le(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new b(He, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${be(t)}`)\n  ].join(`\n`));\n}\nfunction lt(e) {\n  if (e === \"simple\")\n    try {\n      return Qe(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (ee(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction k(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction et(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = Y()(t);\n      n === \"web_app_request_theme\" && k(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ X(e))\n      }), n === \"web_app_request_viewport\" && k(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction bt(e) {\n  var r;\n  const t = typeof e == \"string\" ? I(e) : e;\n  le(t);\n  const n = (r = window.TelegramWebviewProxy) == null ? void 0 : r.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      et(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), n == null || n(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction gt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, r, o) => {\n      if (r === o.length - 1) {\n        t[n] = k;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction wt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction ht(e, t, n) {\n  ce(e).unsub(t, n);\n}\nfunction dt(e, t) {\n  return ie().sub(e, t);\n}\nfunction mt(e, t) {\n  N.unsub(e, t);\n}\nfunction tt(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction J(e) {\n  return e.split(\".\").map(Number);\n}\nfunction nt(e, t) {\n  const n = J(e), r = J(t), o = Math.max(n.length, r.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = n[s] || 0, i = r[s] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return nt(e, t) <= 0;\n}\nfunction B(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", n);\n      if (t === \"try_browser\")\n        return p(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction Et(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (r) => {\n    const { method: o, version: s } = r;\n    let a, i;\n    if (\"param\" in r ? (a = `Parameter \"${r.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, i = Ge) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, i = Be), t === \"strict\")\n      throw new b(i, a);\n    return console.warn(a);\n  };\n  return (r, o) => B(r, e) ? Ne(o) && r === \"web_app_set_header_color\" && \"color\" in o && !B(r, \"color\", e) ? n({ version: e, method: r, param: \"color\" }) : pe(r, o) : n({ version: e, method: r });\n}\nfunction yt(e, t, n, r) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...r || {},\n    params: { method: e, params: t, req_id: n },\n    capture: tt(n)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ve, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction vt() {\n  var e;\n  (e = C()) == null || e(), [\n    ...Object.values(y()),\n    y,\n    N,\n    C,\n    ue,\n    ae\n  ].forEach(rt);\n}\nexport {\n  ae as $debug,\n  ue as $targetOrigin,\n  w as CancelablePromise,\n  ne as ERR_ABORTED,\n  re as ERR_CANCELED,\n  Ve as ERR_CUSTOM_METHOD_ERR_RESPONSE,\n  Ge as ERR_METHOD_PARAMETER_UNSUPPORTED,\n  Be as ERR_METHOD_UNSUPPORTED,\n  He as ERR_RETRIEVE_LP_FAILED,\n  oe as ERR_TIMED_OUT,\n  Ke as ERR_UNKNOWN_ENV,\n  A as EnhancedPromise,\n  b as TypedError,\n  x as addEventListener,\n  ct as camelToKebab,\n  ut as camelToSnake,\n  tt as captureSameReq,\n  nt as compareVersions,\n  M as createAbortError,\n  L as createCbCollector,\n  We as createLogger,\n  Et as createPostEvent,\n  W as createTypedErrorPredicate,\n  gt as defineEventHandlers,\n  _t as deleteCssVar,\n  k as emitMiniAppsEvent,\n  Le as getStorageValue,\n  ee as hasWebviewProxy,\n  yt as invokeCustomMethod,\n  st as isAbortError,\n  at as isCanceledError,\n  De as isIframe,\n  lt as isTMA,\n  ot as isTimeoutError,\n  bt as mockTelegramEnv,\n  ht as off,\n  Je as on,\n  pe as postEvent,\n  wt as removeEventHandlers,\n  fe as request,\n  vt as resetPackageState,\n  Qe as retrieveLaunchParams,\n  ft as setCssVar,\n  ke as setStorageValue,\n  it as sleep,\n  pt as snakeToCamel,\n  dt as subscribe,\n  B as supports,\n  mt as unsubscribe\n};\n//# sourceMappingURL=index.js.map\n","function i() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction c() {\n  const t = i();\n  return !!t && t.type === \"reload\";\n}\nfunction o(t, n) {\n  return t.startsWith(n) ? t : `${n}${t}`;\n}\nfunction R(t) {\n  return new URL(\n    typeof t == \"string\" ? t : [\n      t.pathname || \"\",\n      o(t.search || \"\", \"?\"),\n      o(t.hash || \"\", \"#\")\n    ].join(\"\"),\n    \"http://a\"\n  );\n}\nfunction a(t) {\n  const n = (typeof t == \"string\" ? t : t.pathname || \"\").startsWith(\"/\"), e = R(t), { pathname: s } = e;\n  return `${n ? s : s.slice(1)}${e.search}${e.hash}`;\n}\nconst r = \"ERR_NAVIGATION_HISTORY_EMPTY\", I = \"ERR_NAVIGATION_CURSOR_INVALID\";\nexport {\n  I as ERR_CURSOR_INVALID,\n  r as ERR_HISTORY_EMPTY,\n  R as createSafeURL,\n  o as ensurePrefix,\n  i as getFirstNavigationEntry,\n  c as isPageReload,\n  a as urlToPath\n};\n//# sourceMappingURL=index.js.map\n","let i;\nfunction y(e, s) {\n  i && i.set(e, s) || s();\n}\nfunction m(e) {\n  if (i)\n    return e();\n  i = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    i.forEach((s) => s()), i = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction S(e, s) {\n  s || (s = {});\n  const d = s.equals || Object.is;\n  let n = [], c = e;\n  const a = (t) => {\n    if (!d(c, t)) {\n      const u = c;\n      c = t, y(l, () => {\n        [...n].forEach(([f, g]) => {\n          f(t, u), g && r(f, !0);\n        });\n      });\n    }\n  };\n  function o(t) {\n    const u = typeof t != \"object\" ? { once: t } : t;\n    return {\n      once: u.once || !1,\n      signal: u.signal || !1\n    };\n  }\n  const r = (t, u) => {\n    const f = o(u), g = n.findIndex(([h, p]) => h === t && p.once === f.once && p.signal === f.signal);\n    g >= 0 && n.splice(g, 1);\n  }, l = Object.assign(\n    function() {\n      return j(l), c;\n    },\n    {\n      destroy() {\n        n = [];\n      },\n      set: a,\n      reset() {\n        a(e);\n      },\n      sub(t, u) {\n        return n.push([t, o(u)]), () => r(t, u);\n      },\n      unsub: r,\n      unsubAll() {\n        n = n.filter((t) => t[1].signal);\n      }\n    }\n  );\n  return l;\n}\nconst b = [];\nfunction j(e) {\n  b.length && b[b.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction x(e, s) {\n  let d = /* @__PURE__ */ new Set();\n  const n = /* @__PURE__ */ S(a(), s);\n  function c() {\n    n.set(a());\n  }\n  function a() {\n    d.forEach((l) => l.unsub(c, { signal: !0 }));\n    const o = /* @__PURE__ */ new Set();\n    let r;\n    b.push(o);\n    try {\n      r = e();\n    } finally {\n      b.pop();\n    }\n    return o.forEach((l) => {\n      l.sub(c, { signal: !0 });\n    }), d = o, r;\n  }\n  return Object.assign(function() {\n    return n();\n  }, {\n    destroy: n.destroy,\n    sub: n.sub,\n    unsub: n.unsub,\n    unsubAll: n.unsubAll\n  });\n}\nexport {\n  m as batch,\n  x as computed,\n  S as signal\n};\n//# sourceMappingURL=index.js.map\n","import {\n  retrieveLaunchParams,\n  postEvent as _postEvent,\n  request as _request,\n  invokeCustomMethod as _invokeCustomMethod,\n  createPostEvent,\n  type PostEventFn,\n  type Version,\n  type RequestFn,\n  type CancelablePromise,\n  type ExecuteWithOptions,\n  type CustomMethodParams,\n  type CustomMethodName,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nexport interface ConfigureOptions {\n  /**\n   * A maximum supported Mini Apps version.\n   * @default Being extracted using the `retrieveLaunchParams` function.\n   * @see retrieveLaunchParams\n   */\n  version?: Version;\n  /**\n   * Custom postEvent function.\n   *\n   * Passing the \"strict\" value creates a function, which always checks if specified call supported\n   * by currently supported Mini Apps version. If the method is unsupported, an error will be\n   * thrown.\n   *\n   * Passing the \"non-strict\" value creates a postEvent function not throwing any errors, but\n   * warning about a missing method support.\n   *\n   * @default 'strict'\n   * @see createPostEvent\n   */\n  postEvent?: PostEventFn;\n}\n\n/**\n * Signal with a request identifier generator. Usually, you don't need to set this value manually.\n */\nexport const $createRequestId = signal((() => {\n  let requestId = 0;\n  return () => (requestId += 1).toString();\n})());\n\n/**\n * Signal with a currently used postEvent function across the package.\n */\nexport const $postEvent = signal<PostEventFn>(_postEvent);\n\n/**\n * Signal with a currently supported maximum Mini Apps version. This value is usually set via\n */\nexport const $version = signal<Version>('0.0');\n\n/**\n * Configures package global dependencies.\n * @param options - configuration additional options.\n */\nexport function configure(options?: ConfigureOptions): void {\n  options ||= {};\n  const { postEvent: optionsPostEvent } = options;\n  const v = options.version || retrieveLaunchParams().version;\n  $version.set(v);\n  $postEvent.set(\n    typeof optionsPostEvent === 'function'\n      ? optionsPostEvent\n      : createPostEvent(v),\n  );\n}\n\n/**\n * Creates a new request id.\n */\nexport function createRequestId(): string {\n  return $createRequestId()();\n}\n\n/**\n * Invokes known custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod<M extends CustomMethodName>(\n  method: M,\n  params: CustomMethodParams<M>,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\n/**\n * Invokes unknown custom method. Returns method execution result.\n * @param method - method name.\n * @param params - method parameters.\n * @param options - additional options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown>;\n\nexport function invokeCustomMethod(\n  method: string,\n  params: object,\n  options?: ExecuteWithOptions,\n): CancelablePromise<unknown> {\n  return _invokeCustomMethod(method, params, createRequestId(), {\n    ...options || {},\n    postEvent: postEvent,\n  });\n}\n\n/**\n * `request` function from the bridge with applied global `postEvent` option.\n */\nexport const request = ((method: any, eventOrEvents: any, options: any) => {\n  options ||= {};\n  options.postEvent ||= postEvent;\n  return _request(method, eventOrEvents, options);\n}) as RequestFn;\n\n/**\n * Shortcut for $postEvent call.\n */\nexport const postEvent = ((method: any, params: any) => {\n  return $postEvent()(method, params);\n}) as PostEventFn;\n","export const ERR_POPUP_INVALID_PARAMS = 'ERR_POPUP_INVALID_PARAMS';\nexport const ERR_INVALID_HOSTNAME = 'ERR_INVALID_HOSTNAME';\nexport const ERR_INVALID_SLUG = 'ERR_INVALID_SLUG';\nexport const ERR_DATA_INVALID_SIZE = 'ERR_DATA_INVALID_SIZE';\nexport const ERR_ACCESS_DENIED = 'ERR_ACCESS_DENIED';\nexport const ERR_ALREADY_CALLED = 'ERR_ALREADY_CALLED';\nexport const ERR_NOT_AVAILABLE = 'ERR_NOT_AVAILABLE';\nexport const ERR_NOT_SUPPORTED = 'ERR_NOT_SUPPORTED';\nexport const ERR_NOT_MOUNTED = 'ERR_NOT_MOUNTED';\n","import { type MethodName, supports, TypedError } from '@telegram-apps/bridge';\n\nimport { $version } from '@/scopes/globals.js';\nimport { ERR_NOT_SUPPORTED } from '@/errors.js';\n\nexport type WithIsSupported<F extends (...args: any) => any> = F & {\n  /**\n   * @returns True, if this function is supported.\n   */\n  isSupported(): boolean;\n};\n\n/**\n * Adds the \"isSupported\" method to the passed function returning true if the wrapped\n * function is supported.\n *\n * Also, if the \"isSupported\" method returned false during the function execution,\n * the ERR_NOT_SUPPORTED error will be thrown.\n * @param fn - function to extend.\n * @param isSupported - function to check if the function is supported.\n */\nexport function withIsSupported<F extends (...args: any) => any>(\n  fn: F,\n  isSupported: () => boolean,\n): WithIsSupported<F>;\n\n/**\n * Adds the \"isSupported\" method to the passed function returning true, if the current Mini Apps\n * version supports passed Mini Apps method.\n *\n * Also, if the \"isSupported\" method returned false during the function execution,\n * the ERR_NOT_SUPPORTED error will be thrown.\n * @param fn - function to extend.\n * @param method - Mini Apps method.\n */\nexport function withIsSupported<F extends (...args: any) => any>(\n  fn: F,\n  method: MethodName,\n): WithIsSupported<F>;\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function withIsSupported<F extends (...args: any) => any>(\n  fn: F,\n  arg2: MethodName | (() => boolean),\n): WithIsSupported<F> {\n  function isSupported(): boolean {\n    return typeof arg2 === 'string' ? supports(arg2, $version()) : arg2();\n  }\n\n  return Object.assign(((...args) => {\n    if (!isSupported()) {\n      throw new TypedError(ERR_NOT_SUPPORTED);\n    }\n    return fn(...args);\n  }) as F, {\n    isSupported,\n  });\n}\n","import type { MethodName } from '@telegram-apps/bridge';\nimport { withIsSupported, type WithIsSupported } from '@/scopes/toolkit/withIsSupported.js';\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function createWithIsSupported(isSupportedOrMethod: MethodName | (() => boolean)) {\n  return <Fn extends (...args: any[]) => any>(fn: Fn): WithIsSupported<Fn> => {\n    return withIsSupported(fn, isSupportedOrMethod as unknown as any);\n  };\n}","import type { Signal } from '@telegram-apps/signals';\n\n/**\n * Calls the function and subscribes it to the specified signal.\n *\n * We usually use this function in components' mount methods when we need not only to add\n * a signal change listener, but also call it. For example, to post the actual component state\n * to the Telegram application.\n * @param signal - signal to add change listener to.\n * @param fn - listener to add and call.\n */\nexport function subAndCall<T>(signal: Pick<Signal<T>, 'sub'>, fn: () => void) {\n  fn();\n  signal.sub(fn);\n}","import { type Computed, computed } from '@telegram-apps/signals';\n\nimport { type MethodName, supports } from '@telegram-apps/bridge';\nimport { $version } from '@/scopes/globals.js';\n\n/**\n * @returns A signal returning true if the specified Mini Apps method is supported.\n * @param method - Mini Apps method name\n */\nexport function createIsSupported(method: MethodName): Computed<boolean> {\n  return computed(() => {\n    return supports(method, $version());\n  });\n}","import { TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_NOT_MOUNTED } from '@/errors.js';\n\nexport function withIsMounted<Fn extends (...args: any[]) => any>(\n  fn: Fn,\n  isMounted: () => boolean,\n): Fn {\n  return ((...args) => {\n    if (!isMounted()) {\n      throw new TypedError(ERR_NOT_MOUNTED);\n    }\n    return fn(...args);\n  }) as Fn;\n}","import { withIsMounted } from '@/scopes/toolkit/withIsMounted.js';\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function createWithIsMounted(isMounted: () => boolean) {\n  return <Fn extends (...args: any[]) => any>(fn: Fn): Fn => {\n    return withIsMounted(fn, isMounted);\n  };\n}","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\ntype StorageValue = boolean;\n\nconst WEB_APP_SETUP_BACK_BUTTON = 'web_app_setup_back_button';\nconst BACK_BUTTON_PRESSED = 'back_button_pressed';\nconst STORAGE_KEY = 'backButton';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @returns True if the Back Button is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_SETUP_BACK_BUTTON);\n\nconst withIsSupported = createWithIsSupported(isSupported);\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Hides the Back Button.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const hide = withIsMounted((): void => {\n  isVisible.set(false);\n});\n\n/**\n * True if the Back Button is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const mount = withIsSupported((): void => {\n  if (!isMounted()) {\n    isVisible.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isVisible, onStateChanged);\n    isMounted.set(true);\n  }\n});\n\nfunction onStateChanged(): void {\n  const value = isVisible();\n  postEvent(WEB_APP_SETUP_BACK_BUTTON, { is_visible: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Add a new Back Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const onClick = withIsSupported(\n  (fn: EventListener<'back_button_pressed'>): VoidFunction => on(BACK_BUTTON_PRESSED, fn),\n);\n\n/**\n * Removes the Back Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const offClick = withIsSupported((fn: EventListener<'back_button_pressed'>): void => {\n  off(BACK_BUTTON_PRESSED, fn);\n});\n\n/**\n * Shows the Back Button.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const show = withIsMounted((): void => {\n  isVisible.set(true);\n});\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount(): void {\n  isVisible.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { batch, type Signal } from '@telegram-apps/signals';\nimport { type AsyncOptions, CancelablePromise, TypedError } from '@telegram-apps/bridge';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\n\n/**\n * Creates a mount function for a component.\n * @param mount - function mounting the component.\n * @param onMounted - callback which will be called with the mount result.\n * @param mountPromise - signal containing mount promise.\n * @param isMounted - signal containing mount state.\n * @param mountError - signal containing mount error.\n * @param isSupported - signal containing the component support flag.\n */\n// #__NO_SIDE_EFFECTS__\nexport function createMountFn<T = void>(\n  mount: (options: AsyncOptions) => (T | CancelablePromise<T>),\n  onMounted: (result: T) => void,\n  {\n    isMounting,\n    isMounted,\n    mountError,\n    isSupported,\n  }: {\n    isMounted: Signal<boolean>,\n    isMounting: Signal<boolean>,\n    mountError: Signal<Error | undefined>,\n    isSupported?: () => boolean,\n  },\n): (options?: AsyncOptions) => CancelablePromise<void> {\n  return withIsSupported(mountOptions => {\n      if (isMounted()) {\n        return CancelablePromise.resolve();\n      }\n\n      if (isMounting()) {\n        throw new TypedError(ERR_ALREADY_CALLED);\n      }\n      isMounting.set(true);\n\n      return CancelablePromise\n        .withFn((abortSignal) => mount({ abortSignal }), mountOptions)\n        .then<[true, T], [false, Error]>(\n          r => [true, r],\n          e => [false, e],\n        )\n        .then(tuple => {\n          batch(() => {\n            isMounting.set(false);\n            isMounted.set(true);\n\n            if (tuple[0]) {\n              onMounted(tuple[1]);\n            } else {\n              const error = tuple[1];\n              mountError.set(error);\n              throw error;\n            }\n          });\n        });\n    },\n    isSupported || (() => true),\n  );\n}","import { signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/**\n * Complete biometry manager state.\n */\nexport const state = signal<State | undefined>();\n\n/**\n * True if the manager is currently authenticating.\n */\nexport const isAuthenticating = signal<boolean>(false);\n\n/**\n * True if the manager is currently requesting access.\n */\nexport const isRequestingAccess = signal<boolean>(false);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n","import type { EventPayload } from '@telegram-apps/bridge';\n\nimport type { State } from './types.js';\n\n/**\n * Converts `biometry_info_received` to some common shape.\n * @param event - event payload.\n * @see biometry_info_received\n */\nexport function eventToState(event: EventPayload<'biometry_info_received'>): State {\n  return event.available ? {\n    available: true,\n    tokenSaved: event.token_saved,\n    deviceId: event.device_id,\n    accessRequested: event.access_requested,\n    type: event.type,\n    accessGranted: event.access_granted,\n  } : {\n    available: false,\n  };\n}\n","import type { ExecuteWithOptions, CancelablePromise } from '@telegram-apps/bridge';\n\nimport { request } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\n\nimport { eventToState } from './eventToState.js';\nimport type { State } from './types.js';\n\nconst WEB_APP_BIOMETRY_GET_INFO = 'web_app_biometry_get_info';\n\n/**\n * Requests biometry information.\n * @param options - additional execution options.\n */\nexport const requestBiometry = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<State> => {\n    return request(WEB_APP_BIOMETRY_GET_INFO, 'biometry_info_received', options).then(eventToState);\n  }, WEB_APP_BIOMETRY_GET_INFO,\n);\n","import {\n  on,\n  off,\n  TypedError,\n  CancelablePromise,\n  getStorageValue,\n  setStorageValue,\n  type BiometryTokenUpdateStatus,\n  type BiometryAuthRequestStatus,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent, request } from '@/scopes/globals.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { ERR_ALREADY_CALLED, ERR_NOT_AVAILABLE } from '@/errors.js';\n\nimport {\n  state,\n  mountError,\n  isMounted,\n  isRequestingAccess,\n  isAuthenticating,\n  isMounting,\n} from './signals.js';\nimport { requestBiometry } from './requestBiometry.js';\nimport { eventToState } from './eventToState.js';\nimport type {\n  State,\n  AuthenticateOptions,\n  RequestAccessOptions,\n  UpdateTokenOptions,\n} from './types.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\ntype StorageValue = State;\n\nconst WEB_APP_BIOMETRY_REQUEST_AUTH = 'web_app_biometry_request_auth';\nconst WEB_APP_BIOMETRY_REQUEST_ACCESS = 'web_app_biometry_request_access';\nconst WEB_APP_BIOMETRY_OPEN_SETTINGS = 'web_app_biometry_open_settings';\nconst WEB_APP_BIOMETRY_UPDATE_TOKEN = 'web_app_biometry_update_token';\nconst BIOMETRY_INFO_RECEIVED = 'biometry_info_received';\nconst STORAGE_KEY = 'biometry';\n\n/**\n * @returns True if the biometry manager is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_BIOMETRY_REQUEST_AUTH);\n\nconst withIsSupported = createWithIsSupported(isSupported);\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Attempts to authenticate a user using biometrics and fetch a previously stored\n * secure token.\n * @param options - method options.\n * @since 7.2\n * @returns Token from the local secure storage saved previously or undefined.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_AVAILABLE\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const authenticate = withIsMounted(\n  (options?: AuthenticateOptions): CancelablePromise<{\n    /**\n     * Authentication status.\n     */\n    status: BiometryAuthRequestStatus;\n    /**\n     * Token from the local secure storage saved previously.\n     */\n    token?: string;\n  }> => {\n    if (isAuthenticating()) {\n      return CancelablePromise.reject(new TypedError(ERR_ALREADY_CALLED));\n    }\n\n    const s = state();\n    if (!s || !s.available) {\n      return CancelablePromise.reject(new TypedError(ERR_NOT_AVAILABLE));\n    }\n\n    isAuthenticating.set(true);\n\n    options ||= {};\n    return request(WEB_APP_BIOMETRY_REQUEST_AUTH, 'biometry_auth_requested', {\n      ...options,\n      params: { reason: (options.reason || '').trim() },\n    })\n      .then(response => {\n        const { token } = response;\n        if (typeof token === 'string') {\n          state.set({ ...s, token });\n        }\n        return response;\n      })\n      .finally(() => {\n        isAuthenticating.set(false);\n      });\n  },\n);\n\n/**\n * Opens the biometric access settings for bots. Useful when you need to request biometrics\n * access to users who haven't granted it yet.\n *\n * _Note that this method can be called only in response to user interaction with the Mini App\n * interface (e.g. a click inside the Mini App or on the main button)_.\n * @since 7.2\n */\nexport const openSettings = withIsSupported((): void => {\n  postEvent(WEB_APP_BIOMETRY_OPEN_SETTINGS);\n});\n\n/**\n * Requests permission to use biometrics.\n * @since 7.2\n * @returns Promise with true, if access was granted.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_AVAILABLE\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const requestAccess = withIsMounted(\n  (options?: RequestAccessOptions): CancelablePromise<boolean> => {\n    if (isRequestingAccess()) {\n      return CancelablePromise.reject(new TypedError(ERR_ALREADY_CALLED));\n    }\n    isRequestingAccess.set(true);\n\n    options ||= {};\n    return request(WEB_APP_BIOMETRY_REQUEST_ACCESS, BIOMETRY_INFO_RECEIVED, {\n      ...options,\n      params: { reason: options.reason || '' },\n    })\n      .then(eventToState)\n      .then((info) => {\n        if (!info.available) {\n          throw new TypedError(ERR_NOT_AVAILABLE);\n        }\n        state.set(info);\n        return info.accessGranted;\n      })\n      .finally(() => {\n        isRequestingAccess.set(false);\n      });\n  },\n);\n\n/**\n * Mounts the component.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const mount = createMountFn<State>(\n  (options) => {\n    // Try to restore the state using the storage.\n    const s = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    if (s) {\n      return s;\n    }\n\n    // We were unable to retrieve data locally. In this case, we are sending a request returning\n    // the biometry information.\n    return requestBiometry(options);\n  },\n  result => {\n    on(BIOMETRY_INFO_RECEIVED, onBiometryInfoReceived);\n    subAndCall(state, onStateChanged);\n    state.set(result);\n  },\n  { isMounted, mountError, isMounting, isSupported },\n);\n\nconst onBiometryInfoReceived: EventListener<'biometry_info_received'> = e => {\n  state.set(eventToState(e));\n};\n\nfunction onStateChanged(): void {\n  const s = state();\n  s && setStorageValue<StorageValue>(STORAGE_KEY, s);\n}\n\n/**\n * Unmounts the component.\n */\nexport function unmount() {\n  off(BIOMETRY_INFO_RECEIVED, onBiometryInfoReceived);\n  state.unsub(onStateChanged);\n}\n\n/**\n * Updates the biometric token in a secure storage on the device.\n * @since 7.2\n * @returns Promise with `true`, if token was updated.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const updateToken = withIsMounted(\n  (options?: UpdateTokenOptions): CancelablePromise<BiometryTokenUpdateStatus> => {\n    options ||= {};\n    return request(WEB_APP_BIOMETRY_UPDATE_TOKEN, 'biometry_token_updated', {\n      ...options,\n      params: {\n        token: options.token || '',\n        reason: options.reason,\n      },\n    }).then(r => r.status);\n  },\n);\n","import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\ntype StorageValue = boolean;\n\nconst STORAGE_KEY = 'closingConfirmation';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Disables the confirmation dialog when closing the Mini App.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const disableConfirmation = withIsMounted((): void => {\n  isConfirmationEnabled.set(false);\n});\n\n/**\n * True if the confirmation dialog should be shown while the user is trying to close the Mini App.\n */\nexport const isConfirmationEnabled = signal(false);\n\n/**\n * Enables the confirmation dialog when closing the Mini App.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const enableConfirmation = withIsMounted((): void => {\n  isConfirmationEnabled.set(true);\n});\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    isConfirmationEnabled.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isConfirmationEnabled, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\nfunction onStateChanged(): void {\n  const value = isConfirmationEnabled();\n  postEvent('web_app_setup_closing_behavior', { need_confirmation: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  isConfirmationEnabled.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { CancelablePromise, type ExecuteWithOptions } from '@telegram-apps/bridge';\nimport { array, object, string } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod } from '@/scopes/globals.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\n\nconst WEB_APP_INVOKE_CUSTOM_METHOD = 'web_app_invoke_custom_method';\n\n/**\n * @returns True if the Cloud Storage is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_INVOKE_CUSTOM_METHOD);\n\nconst withIsSupported = createWithIsSupported(isSupported);\n\n/**\n * Deletes specified key or keys from the cloud storage.\n * @param keyOrKeys - key or keys to delete.\n * @param options - request execution options.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const deleteItem = withIsSupported((\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<void> => {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n  return keys.length\n    ? invokeCustomMethod('deleteStorageValues', { keys }, options).then()\n    : CancelablePromise.resolve();\n});\n\n/**\n * @param keys - keys list.\n * @param options - request execution options.\n * @returns Map, where a key is one of the specified in the `keys` argument, and a value is\n * a corresponding storage value.\n */\nfunction _getItem<K extends string>(\n  keys: K[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<Record<K, string>>;\n\n/**\n * @param key - cloud storage key.\n * @param options - request execution options.\n * @return Value of the specified key. If the key was not created previously, the function\n * will return an empty string.\n */\nfunction _getItem(key: string, options?: ExecuteWithOptions): CancelablePromise<string>;\n\nfunction _getItem(\n  keyOrKeys: string | string[],\n  options?: ExecuteWithOptions,\n): CancelablePromise<string | Record<string, string>> {\n  const keys = Array.isArray(keyOrKeys) ? keyOrKeys : [keyOrKeys];\n\n  return keys.length\n    ? invokeCustomMethod('getStorageValues', { keys }, options).then(data => {\n      const result = object(\n        Object.fromEntries(keys.map((k) => [k, string()])),\n      )()(data);\n\n      return Array.isArray(keyOrKeys) ? result : result[keyOrKeys];\n    })\n    : CancelablePromise.resolve(typeof keyOrKeys === 'string' ? '' : {});\n}\n\n/**\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const getItem = withIsSupported(_getItem);\n\n/**\n * Returns a list of all keys presented in the cloud storage.\n * @param options - request execution options.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const getKeys = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<string[]> => {\n    return invokeCustomMethod('getStorageKeys', {}, options).then(array(string())());\n  },\n);\n\n/**\n * Saves specified value by key.\n * @param key - storage key.\n * @param value - storage value.\n * @param options - request execution options.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const setItem = withIsSupported(\n  (key: string, value: string, options?: ExecuteWithOptions): CancelablePromise<void> => {\n    return invokeCustomMethod('saveStorageValue', {\n      key,\n      value,\n    }, options).then();\n  },\n);\n","import type {\n  ImpactHapticFeedbackStyle,\n  NotificationHapticFeedbackType,\n} from '@telegram-apps/bridge';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\n\nconst WEB_APP_TRIGGER_HAPTIC_FEEDBACK = 'web_app_trigger_haptic_feedback';\n\n/**\n * @returns True if the Haptic Feedback is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_TRIGGER_HAPTIC_FEEDBACK);\n\nconst withIsSupported = createWithIsSupported(isSupported);\n\n/**\n * A method tells that an impact occurred. The Telegram app may play the appropriate haptics based\n * on style value passed.\n * @param style - impact style.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const impactOccurred = withIsSupported((style: ImpactHapticFeedbackStyle): void => {\n  postEvent(WEB_APP_TRIGGER_HAPTIC_FEEDBACK, { type: 'impact', impact_style: style });\n});\n\n/**\n * A method tells that a task or action has succeeded, failed, or produced a warning. The Telegram\n * app may play the appropriate haptics based on type value passed.\n * @param type - notification type.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const notificationOccurred = withIsSupported((type: NotificationHapticFeedbackType): void => {\n  postEvent(WEB_APP_TRIGGER_HAPTIC_FEEDBACK, { type: 'notification', notification_type: type });\n});\n\n/**\n * A method tells that the user has changed a selection. The Telegram app may play the\n * appropriate haptics.\n *\n * Do not use this feedback when the user makes or confirms a selection; use it only when the\n * selection changes.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const selectionChanged = withIsSupported((): void => {\n  postEvent(WEB_APP_TRIGGER_HAPTIC_FEEDBACK, { type: 'selection_change' });\n});\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\nimport { type InitData, retrieveLaunchParams } from '@telegram-apps/bridge';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<InitData | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction fromState<K extends keyof InitData>(key: K): Computed<InitData[K] | undefined> {\n  return computed(() => {\n    const s = state();\n    return s ? s[key] : undefined;\n  });\n}\n\n/**\n * @see InitData.authDate\n */\nexport const authDate = fromState('authDate');\n\n/**\n * @see InitData.canSendAfter\n */\nexport const canSendAfter = fromState('canSendAfter');\n\n/**\n * Date after which it is allowed to call\n * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.\n */\nexport const canSendAfterDate = computed(() => {\n  const authDateValue = authDate();\n  const canSendAfterValue = canSendAfter();\n\n  return canSendAfterValue && authDateValue\n    ? new Date(authDateValue.getTime() + canSendAfterValue * 1000)\n    : undefined\n});\n\n/**\n * @see InitData.chat\n */\nexport const chat = fromState('chat');\n\n/**\n * @see InitData.chatType\n */\nexport const chatType = fromState('chatType');\n\n/**\n * @see InitData.chatInstance\n */\nexport const chatInstance = fromState('chatInstance');\n\n/**\n * @see InitData.hash\n */\nexport const hash = fromState('hash');\n\n/**\n * @see InitData.queryId\n */\nexport const queryId = fromState('queryId');\n\n/**\n * Raw representation of init data.\n */\nexport const raw = signal<string | undefined>();\n\n/**\n * @see InitData.receiver\n */\nexport const receiver = fromState('receiver');\n\n/**\n * Restores the component state.\n */\nexport function restore(): void {\n  const lp = retrieveLaunchParams();\n  state.set(lp.initData);\n  raw.set(lp.initDataRaw);\n}\n\n/**\n * @see InitData.startParam\n */\nexport const startParam = fromState('startParam');\n\n/**\n * @see InitData.user\n */\nexport const user = fromState('user');","import { initData } from '@telegram-apps/transformers';\nimport type { InitData } from '@telegram-apps/bridge';\n\n/**\n * Parses an incoming value as init data.\n * @param value - value to check.\n * @throws {} Parsing errors.\n */\nexport function parseInitData(value: unknown): InitData {\n  return initData()(value);\n}","import {\n  TypedError,\n  type ExecuteWithOptions,\n  type InvoiceStatus,\n  type ExecuteWithPostEvent,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { ERR_INVALID_HOSTNAME, ERR_INVALID_SLUG, ERR_ALREADY_CALLED } from '@/errors.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\n\nconst WEB_APP_OPEN_INVOICE = 'web_app_open_invoice';\n\n/**\n * True if the invoice is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * @returns True if the Invoice is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_OPEN_INVOICE);\n\n/**\n * Opens an invoice using its slug.\n * Example of the value: `jd231xxSd1`\n * @param slug - invoice slug.\n * @param options - additional options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_INVALID_HOSTNAME\n * @throws {TypedError} ERR_INVALID_SLUG\n */\nexport function _open(slug: string, options?: ExecuteWithPostEvent): Promise<InvoiceStatus>;\n\n/**\n * Opens an invoice using its url.\n *\n * The function expects to pass a link in a full format, with the hostname \"t.me\".\n * Examples:\n * - `https://t.me/$jd231xxSd1`\n * - `https://t.me/invoice/jd231xxSd1`\n * @param url - invoice URL.\n * @param type - value type.\n * @param options - additional options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_INVALID_HOSTNAME\n * @throws {TypedError} ERR_INVALID_SLUG\n */\nexport function _open(\n  url: string,\n  type: 'url',\n  options?: ExecuteWithPostEvent,\n): Promise<InvoiceStatus>;\n\nexport async function _open(\n  urlOrSlug: string,\n  optionsOrType?: 'url' | ExecuteWithOptions,\n  options?: ExecuteWithOptions,\n): Promise<InvoiceStatus> {\n  if (isOpened()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n\n  let slug: string;\n\n  if (optionsOrType === 'url') {\n    const { hostname, pathname } = new URL(urlOrSlug, window.location.href);\n    if (hostname !== 't.me') {\n      throw new TypedError(ERR_INVALID_HOSTNAME);\n    }\n\n    // Valid examples:\n    // \"/invoice/my-slug\"\n    // \"/$my-slug\"\n    const match = pathname.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n    if (!match) {\n      throw new TypedError(ERR_INVALID_SLUG);\n    }\n    [, , slug] = match;\n  } else {\n    slug = urlOrSlug;\n    options = optionsOrType;\n  }\n\n  isOpened.set(true);\n\n  return request(WEB_APP_OPEN_INVOICE, 'invoice_closed', {\n    ...options,\n    params: { slug },\n    capture: (data) => slug === data.slug,\n  })\n    .then(r => r.status)\n    .finally(() => {\n      isOpened.set(false);\n    });\n}\n\n/**\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const open = withIsSupported(_open, isSupported);\n","import { toRGB } from '@telegram-apps/transformers';\n\n/**\n * @param color - color in any format acceptable by the `toRGB` function.\n * @returns True if the color is recognized as dark.\n * @see toRGB\n */\nexport function isColorDark(color: string): boolean {\n  const rgb = toRGB(color);\n\n  // Real formula: hsp = Math.sqrt(0.299 * r * r + 0.587 * g * g + 0.114 * b * b)\n  // See: https://stackoverflow.com/a/596243\n  return Math.sqrt(\n    [0.299, 0.587, 0.114].reduce<number>((acc, modifier, idx) => {\n      // Extract part of #RRGGBB pattern and convert it to DEC.\n      const dec = parseInt(rgb.slice(1 + idx * 2, 1 + (idx + 1) * 2), 16);\n      return acc + dec * dec * modifier;\n    }, 0),\n  ) < 120;\n}\n","import type { ThemeParams } from '@telegram-apps/bridge';\nimport { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * Complete component state.\n */\nexport const state = signal<ThemeParams>({});\n\nfunction fromState<K extends keyof ThemeParams>(key: K): Computed<ThemeParams[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * @since v6.10\n */\nexport const accentTextColor = fromState('accentTextColor');\n\nexport const backgroundColor = fromState('bgColor');\n\nexport const buttonColor = fromState('buttonColor');\n\nexport const buttonTextColor = fromState('buttonTextColor');\n\n/**\n * @since v7.10\n */\nexport const bottomBarBgColor = fromState('bottomBarBgColor');\n\nexport const destructiveTextColor = fromState('destructiveTextColor');\n\n/**\n * @since v6.10\n */\nexport const headerBackgroundColor = fromState('headerBgColor');\n\nexport const hintColor = fromState('hintColor');\n\n/**\n * @returns True if the current color scheme is recognized as dark.\n * This value is calculated based on the current theme's background color.\n */\nexport const isDark = computed(() => {\n  const { bgColor } = state();\n  return !bgColor || isColorDark(bgColor);\n});\n\nexport const linkColor = fromState('linkColor');\n\nexport const secondaryBackgroundColor = fromState('secondaryBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionBackgroundColor = fromState('sectionBgColor');\n\n/**\n * @since v6.10\n */\nexport const sectionHeaderTextColor = fromState('sectionHeaderTextColor');\n\n/**\n * @since v7.6\n */\nexport const sectionSeparatorColor = fromState('sectionSeparatorColor');\n\n/**\n * @since v6.10\n */\nexport const subtitleTextColor = fromState('subtitleTextColor');\n\nexport const textColor = fromState('textColor');\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { buttonColor, buttonTextColor } from '@/scopes/components/theme-params/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(key: K): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  text: 'Continue',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || buttonColor() || '#2481cc',\n    textColor: s.textColor || buttonTextColor() || '#ffffff',\n  };\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @see State.backgroundColor\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * @see State.hasShineEffect\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * @see State.isEnabled\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * @see State.isLoaderVisible\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * @see State.isVisible\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * @see State.text\n */\nexport const text = fromState('text');\n\n/**\n * @see State.textColor\n */\nexport const textColor = fromState('textColor');\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst WEB_APP_SETUP_MAIN_BUTTON = 'web_app_setup_main_button';\nconst MAIN_BUTTON_PRESSED = 'main_button_pressed';\nconst STORAGE_KEY = 'mainButton';\n\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    prev && internalState.set(prev);\n\n    internalState.sub(onInternalStateChanged);\n    subAndCall(state, onStateChanged);\n    isMounted.set(true);\n  }\n}\n\n/**\n * Adds a new main button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n */\nexport function onClick(fn: EventListener<'main_button_pressed'>): VoidFunction {\n  return on(MAIN_BUTTON_PRESSED, fn);\n}\n\n/**\n * Removes the main button click listener.\n * @param fn - an event listener.\n */\nexport function offClick(fn: EventListener<'main_button_pressed'>): void {\n  off(MAIN_BUTTON_PRESSED, fn);\n}\n\nfunction onInternalStateChanged(state: State): void {\n  setStorageValue<StorageValue>(STORAGE_KEY, state);\n}\n\nfunction onStateChanged(): void {\n  const s = state();\n\n  // We should not commit changes until the payload is correct.\n  // Some version of Telegram will crash due to the empty value of the text.\n  s.text && postEvent(WEB_APP_SETUP_MAIN_BUTTON, {\n    color: s.backgroundColor,\n    has_shine_effect: s.hasShineEffect,\n    is_active: s.isEnabled,\n    is_progress_visible: s.isLoaderVisible,\n    is_visible: s.isVisible,\n    text: s.text,\n    text_color: s.textColor,\n  });\n}\n\n/**\n * Updates the main button state.\n * @param updates - state changes to perform.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const setParams = withIsMounted((updates: Partial<State>): void => {\n  internalState.set({\n    ...internalState(),\n    ...Object.fromEntries(\n      Object.entries(updates).filter(([, v]) => v !== undefined),\n    ),\n  });\n});\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount(): void {\n  internalState.unsub(onInternalStateChanged);\n  state.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { themeParams } from '@telegram-apps/transformers';\nimport type { ThemeParams } from '@telegram-apps/bridge';\n\n/**\n * Parses incoming value as theme parameters.\n * @param value - value to parse.\n */\nexport function parseThemeParams(value: unknown): ThemeParams {\n  return themeParams()(value);\n}\n","import {\n  off,\n  on,\n  TypedError,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  retrieveLaunchParams,\n  deleteCssVar,\n  setCssVar,\n  type EventListener,\n  type RGB,\n  type ThemeParams,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { withIsMounted } from '@/scopes/toolkit/withIsMounted.js';\n\nimport { isCssVarsBound, state, isMounted } from './signals.js';\nimport { parseThemeParams } from './parseThemeParams.js';\nimport type { GetCssVarNameFn } from './types.js';\n\ntype StorageValue = ThemeParams;\n\nconst STORAGE_KEY = 'themeParams';\nconst THEME_CHANGED_EVENT = 'theme_changed';\n\n/**\n * Creates CSS variables connected with the current theme parameters.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-theme-bg-color`\n * - `--tg-theme-secondary-text-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * theme parameters key.\n * @returns Function to stop updating variables.\n * @throws TypedError ERR_ALREADY_CALLED\n */\nexport const bindCssVars = withIsMounted((getCSSVarName?: GetCssVarNameFn): VoidFunction => {\n  if (isCssVarsBound()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  getCSSVarName ||= (prop) => `--tg-theme-${camelToKebab(prop)}`;\n\n  function forEachEntry(fn: (key: string, value: RGB) => void): void {\n    Object.entries(state()).forEach(([k, v]) => {\n      v && fn(k, v);\n    });\n  }\n\n  function actualize(): void {\n    forEachEntry((k, v) => {\n      setCssVar(getCSSVarName!(k), v);\n    });\n  }\n\n  actualize();\n  state.sub(actualize);\n  isCssVarsBound.set(true);\n\n  return () => {\n    forEachEntry(deleteCssVar);\n    state.unsub(actualize);\n    isCssVarsBound.set(false);\n  };\n}, isMounted);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport function mount(): void {\n  if (!isMounted()) {\n    on(THEME_CHANGED_EVENT, onThemeChanged);\n    state.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || retrieveLaunchParams().themeParams);\n    isMounted.set(true);\n  }\n}\n\n/**\n * Actualizes the theme parameters whenever an according event was received.\n * @param e - event data.\n */\nconst onThemeChanged: EventListener<'theme_changed'> = (e) => {\n  const value = parseThemeParams(e.theme_params);\n  state.set(value);\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n};\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  off(THEME_CHANGED_EVENT, onThemeChanged);\n  isMounted.set(false);\n}\n","import {\n  MethodNameWithVersionedParams,\n  MethodVersionedParams,\n  supports, TypedError,\n} from '@telegram-apps/bridge';\nimport { $version } from '@/scopes/globals.js';\nimport { ERR_NOT_SUPPORTED } from '@/errors.js';\n\ntype HasCheckSupportMethodTuple<FnArgs extends any[]> = {\n  [M in MethodNameWithVersionedParams]: [\n    method: M,\n    parameter: MethodVersionedParams<M>,\n    shouldCheck: (...args: FnArgs) => boolean,\n  ]\n}[MethodNameWithVersionedParams];\n\nexport type WithSupports<\n  F extends (...args: any) => any,\n  S extends Record<string, unknown>\n> = F & {\n  /**\n   * @returns True, if this function is supported.\n   */\n  supports(method: keyof S): boolean;\n};\n\n/**\n * Adds the \"supports\" method to the passed function returning true, if specified action is\n * supported by the current Mini Apps version.\n *\n * Wrapped function throws an error in case, the passed arguments are subject to check for one\n * of the schema properties.\n * @param fn - function to extend.\n * @param schema - map where key is an action name and value is a tuple containing Mini Apps\n * method name and its option.\n */\n\n/*@__NO_SIDE_EFFECTS__*/\nexport function withSupports<\n  F extends (...args: any) => any,\n  S extends Record<string, HasCheckSupportMethodTuple<Parameters<F>>>,\n>(fn: F, schema: S): WithSupports<F, S> {\n  function sup(param: keyof S): boolean {\n    const tuple = schema[param];\n    return supports(tuple[0], tuple[1], $version());\n  }\n\n  return Object.assign(\n    (...args: Parameters<F>): ReturnType<F> => {\n      for (const k in schema) {\n        if (schema[k][2](...args) && !sup(k)) {\n          throw new TypedError(ERR_NOT_SUPPORTED, `Parameter \"${k}\" is not supported`);\n        }\n      }\n      return fn(...args);\n    },\n    fn,\n    { supports: sup },\n  );\n}","import { Computed, computed, signal } from '@telegram-apps/signals';\nimport { isRGB } from '@telegram-apps/transformers';\nimport type { BackgroundColor, BottomBarColor, RGB } from '@telegram-apps/bridge';\n\nimport { isColorDark } from '@/utils/isColorDark.js';\nimport {\n  backgroundColor as themeBgColor,\n  secondaryBackgroundColor as themeSecondaryBgColor,\n  bottomBarBgColor as themeBottomBarBgColor,\n} from '@/scopes/components/theme-params/signals.js';\n\nimport type { HeaderColor, State } from './types.js';\n\n// #__NO_SIDE_EFFECTS__\nfunction rgbBasedOn(signal: Computed<'bg_color' | 'secondary_bg_color' | RGB>) {\n  return computed<RGB | undefined>(() => {\n    const color = signal();\n\n    return isRGB(color) ? color : color === 'bg_color'\n      ? themeBgColor()\n      : themeSecondaryBgColor();\n  });\n}\n\n/**\n * The Mini App background color.\n */\nexport const backgroundColor = signal<BackgroundColor>('bg_color');\n\n/**\n * RGB representation of the background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const backgroundColorRGB = rgbBasedOn(backgroundColor);\n\n\n/**\n * The Mini App bottom bar background color.\n */\nexport const bottomBarColor = signal<BottomBarColor>('bottom_bar_bg_color');\n\n/**\n * RGB representation of the bottom bar background color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const bottomBarColorRGB = computed<RGB | undefined>(() => {\n  const color = bottomBarColor();\n  return isRGB(color)\n    ? color\n    : color === 'bottom_bar_bg_color'\n      // Following the logic from the Telegram SDK.\n      // I removed \"|| '#ffffff'\" because this seems too strange to me. This is just not right.\n      ? themeBottomBarBgColor() || themeSecondaryBgColor()\n      : color === 'secondary_bg_color'\n        ? themeSecondaryBgColor()\n        : themeBgColor();\n});\n\n/**\n * The Mini App header color.\n */\nexport const headerColor = signal<HeaderColor>('bg_color');\n\n/**\n * RGB representation of the header color.\n *\n * This value requires the Theme Params component to be mounted to extract a valid RGB value\n * of the color key.\n */\nexport const headerColorRGB = rgbBasedOn(headerColor);\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the current Mini App background color is recognized as dark.\n */\nexport const isDark = computed(() => {\n  const color = backgroundColorRGB();\n  return color ? isColorDark(color) : false;\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<State>(() => ({\n  backgroundColor: backgroundColor(),\n  bottomBarColor: bottomBarColor(),\n  headerColor: headerColor(),\n}));\n","import {\n  getStorageValue,\n  setStorageValue,\n  createCbCollector,\n  camelToKebab,\n  deleteCssVar,\n  setCssVar,\n  TypedError,\n  supports,\n  type RGB,\n  type BottomBarColor,\n  type BackgroundColor,\n} from '@telegram-apps/bridge';\nimport { isRGB } from '@telegram-apps/transformers';\nimport { isPageReload } from '@telegram-apps/navigation';\nimport { computed, type Computed } from '@telegram-apps/signals';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { mount as tpMount } from '@/scopes/components/theme-params/methods.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { withSupports } from '@/scopes/toolkit/withSupports.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\nimport {\n  headerColor,\n  backgroundColor,\n  isCssVarsBound,\n  state,\n  isMounted,\n  bottomBarColor,\n  headerColorRGB,\n  bottomBarColorRGB,\n  backgroundColorRGB,\n} from './signals.js';\nimport type { GetCssVarNameFn, HeaderColor, State } from './types.js';\n\ntype StorageValue = State;\n\nconst WEB_APP_SET_BACKGROUND_COLOR = 'web_app_set_background_color';\nconst WEB_APP_SET_BOTTOM_BAR_COLOR = 'web_app_set_bottom_bar_color';\nconst WEB_APP_SET_HEADER_COLOR = 'web_app_set_header_color';\nconst STORAGE_KEY = 'miniApp';\n\n/**\n * True if the Mini App component is supported.\n */\nexport const isSupported = computed(() => {\n  return ([\n    WEB_APP_SET_BACKGROUND_COLOR,\n    WEB_APP_SET_BOTTOM_BAR_COLOR,\n    WEB_APP_SET_HEADER_COLOR,\n  ] as const).some(method => supports(method, $version()));\n});\n\nconst withComponentSupported = createWithIsSupported(isSupported);\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Creates CSS variables connected with the mini app.\n *\n * Default variables:\n * - `--tg-bg-color`\n * - `--tg-header-color`\n * - `--tg-bottom-bar-color`\n *\n * Variables are being automatically updated if theme parameters were changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * mini app key.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const bindCssVars = withIsMounted((getCSSVarName?: GetCssVarNameFn): VoidFunction => {\n  if (isCssVarsBound()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  const [addCleanup, cleanup] = createCbCollector();\n\n  /**\n   * Binds specified CSS variable to a signal.\n   * @param cssVar - CSS variable name.\n   * @param signal - signal to listen changes to.\n   */\n  function bind(cssVar: string, signal: Computed<RGB | undefined>) {\n    function update() {\n      setCssVar(cssVar, signal() || null);\n    }\n\n    // Instantly set CSS variable.\n    update();\n\n    // Remember to clean this relation up.\n    addCleanup(signal.sub(update), deleteCssVar.bind(null, cssVar));\n  }\n\n  getCSSVarName ||= (prop) => `--tg-${camelToKebab(prop)}`;\n  bind(getCSSVarName('bgColor'), backgroundColorRGB);\n  bind(getCSSVarName('bottomBarColor'), bottomBarColorRGB);\n  bind(getCSSVarName('headerColor'), headerColorRGB);\n  addCleanup(() => {\n    isCssVarsBound.set(false);\n  });\n\n  isCssVarsBound.set(true);\n\n  return cleanup;\n});\n\n/**\n * Closes the Mini App.\n * @param returnBack - Should the client return to the previous activity.\n */\nexport function close(returnBack?: boolean): void {\n  postEvent('web_app_close', { return_back: returnBack });\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n *\n * Internally, the function mounts the Theme Params component to work with correctly extracted\n * theme palette values.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const mount = withComponentSupported((): void => {\n  if (!isMounted()) {\n    const s = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    tpMount();\n\n    backgroundColor.set(s ? s.backgroundColor : 'bg_color');\n    bottomBarColor.set(s ? s.bottomBarColor : 'bottom_bar_bg_color');\n    headerColor.set(s ? s.headerColor : 'bg_color');\n\n    setBackgroundColor.isSupported() && subAndCall(backgroundColor, onBgColorChanged);\n    setBottomBarColor.isSupported() && subAndCall(bottomBarColor, onBottomBarBgColorChanged);\n    setHeaderColor.isSupported() && subAndCall(headerColor, onHeaderColorChanged);\n\n    isMounted.set(true);\n  }\n});\n\nfunction onBgColorChanged(): void {\n  saveState();\n  postEvent(WEB_APP_SET_BACKGROUND_COLOR, { color: backgroundColor() });\n}\n\nfunction onBottomBarBgColorChanged(): void {\n  saveState();\n  postEvent(WEB_APP_SET_BOTTOM_BAR_COLOR, { color: bottomBarColor() });\n}\n\nfunction onHeaderColorChanged(): void {\n  const color = headerColor();\n  saveState();\n  postEvent(WEB_APP_SET_HEADER_COLOR, isRGB(color) ? { color } : { color_key: color });\n}\n\n/**\n * Informs the Telegram app that the Mini App is ready to be displayed.\n *\n * It is recommended to call this method as early as possible, as soon as all essential\n * interface elements loaded.\n *\n * Once this method is called, the loading placeholder is hidden and the Mini App shown.\n *\n * If the method is not called, the placeholder will be hidden only when the page was fully loaded.\n */\nexport function ready(): void {\n  postEvent('web_app_ready');\n}\n\nfunction saveState() {\n  setStorageValue<StorageValue>(STORAGE_KEY, state());\n}\n\n/**\n * Updates the background color.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const setBackgroundColor = withIsSupported(\n  withIsMounted((color: BackgroundColor): void => {\n    backgroundColor.set(color);\n  }),\n  WEB_APP_SET_BACKGROUND_COLOR,\n);\n\n/**\n * Updates the bottom bar background color.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const setBottomBarColor = withIsSupported(\n  withIsMounted((color: BottomBarColor) => {\n    bottomBarColor.set(color);\n  }),\n  WEB_APP_SET_BOTTOM_BAR_COLOR,\n);\n\n/**\n * Updates the header color.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const setHeaderColor = withSupports(\n  withIsSupported(\n    withIsMounted((color: HeaderColor): void => {\n      headerColor.set(color);\n    }),\n    WEB_APP_SET_HEADER_COLOR,\n  ),\n  {\n    color: [WEB_APP_SET_HEADER_COLOR, 'color', isRGB],\n  },\n);\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  backgroundColor.unsub(onBgColorChanged);\n  bottomBarColor.unsub(onBottomBarBgColorChanged);\n  headerColor.unsub(onHeaderColorChanged);\n  isMounted.set(false);\n}\n","import { type PopupParams, TypedError } from '@telegram-apps/bridge';\n\nimport { ERR_POPUP_INVALID_PARAMS } from '@/errors.js';\n\nimport type { OpenOptions } from './types.js';\n\n/**\n * Prepares popup parameters before sending them to native app.\n * @param params - popup parameters.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons count\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid text length.\n */\nexport function prepareParams(params: OpenOptions): PopupParams {\n  const message = params.message.trim();\n  const title = (params.title || '').trim();\n  const buttons = params.buttons || [];\n\n  if (title.length > 64) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid title: ${title}`);\n  }\n  if (!message || message.length > 256) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid message: ${message}`);\n  }\n  if (buttons.length > 3) {\n    throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Invalid buttons count: ${buttons.length}`);\n  }\n\n  return {\n    title,\n    message,\n    buttons: buttons.length\n      ? buttons.map((b, idx) => {\n        const id = b.id || '';\n        if (id.length > 64) {\n          throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid id: ${id}`);\n        }\n\n        if (!b.type || b.type === 'default' || b.type === 'destructive') {\n          const text = b.text.trim();\n          if (!text || text.length > 64) {\n            throw new TypedError(ERR_POPUP_INVALID_PARAMS, `Button with index ${idx} has invalid text: ${text}`);\n          }\n          return { type: b.type, text, id };\n        }\n        return { type: b.type, id };\n      })\n      : [{ type: 'close', id: '' }],\n  };\n}","import { TypedError } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { request } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\n\nimport { prepareParams } from './prepareParams.js';\nimport type { OpenOptions } from './types.js';\n\nconst WEB_APP_OPEN_POPUP = 'web_app_open_popup';\n\n/**\n * @returns True if the Popup is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_OPEN_POPUP);\n\n/**\n * True if a popup is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * A method that shows a native popup described by the `params` argument.\n * The promise will be resolved when the popup is closed. Resolved value will have\n * an identifier of pressed button.\n *\n * If a user clicked outside the popup or clicked the top right popup close button, null will be\n * returned.\n *\n * @param options - popup parameters.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid title length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid message length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid buttons length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid button id length.\n * @throws {TypedError} ERR_POPUP_INVALID_PARAMS: Invalid text length.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const open = withIsSupported(\n  async (options: OpenOptions): Promise<string | null> => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isOpened.set(true);\n\n    try {\n      const { button_id: buttonId = null } = await request(WEB_APP_OPEN_POPUP, 'popup_closed', {\n        ...options,\n        params: prepareParams(options),\n      });\n      return buttonId;\n    } finally {\n      isOpened.set(false);\n    }\n  },\n  isSupported,\n);","import {\n  CancelablePromise,\n  createCbCollector,\n  TypedError,\n  on,\n  EnhancedPromise,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\n\ninterface OpenSharedOptions extends ExecuteWithOptions {\n  /**\n   * Title to be displayed in the scanner.\n   */\n  text?: string;\n}\n\nconst WEB_APP_CLOSE_SCAN_QR_POPUP = 'web_app_close_scan_qr_popup';\nconst WEB_APP_OPEN_SCAN_QR_POPUP = 'web_app_open_scan_qr_popup';\nconst SCAN_QR_POPUP_CLOSED = 'scan_qr_popup_closed';\nconst QR_TEXT_RECEIVED = 'qr_text_received';\n\n/**\n * @returns True if the QR scanner is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_OPEN_SCAN_QR_POPUP);\n\nconst withIsSupported = createWithIsSupported(isSupported);\n\n/**\n * Closes the scanner.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const close = withIsSupported((): void => {\n  isOpened.set(false);\n  postEvent(WEB_APP_CLOSE_SCAN_QR_POPUP);\n});\n\n/**\n * True if the scanner is currently opened.\n */\nexport const isOpened = signal(false);\n\n/**\n * Opens the scanner and returns a promise which will be resolved with the QR content if the\n * `capture` function returned true.\n *\n * Promise may also be resolved to null if the scanner was closed.\n * @param options - method options.\n * @returns A promise with QR content presented as string or undefined if the scanner was closed.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nfunction _open(options?: OpenSharedOptions & {\n  /**\n   * Function, which should return true if a scanned QR should be captured.\n   * @param qr - scanned QR content.\n   */\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | undefined>;\n\n/**\n * Opens the scanner and calls the `onCaptured` function each time, a QR was scanned.\n *\n * The method does not return anything and expects the scanner to be closed externally by a user\n * or via the `close` method.\n * @param options - method options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n */\nfunction _open(options: OpenSharedOptions & {\n  /**\n   * Function which will be called if some QR code was scanned.\n   * @param qr - scanned QR content.\n   */\n  onCaptured: (qr: string) => void;\n}): CancelablePromise<void>;\n\nfunction _open(options?: OpenSharedOptions & {\n  onCaptured?: (qr: string) => void;\n  capture?: (qr: string) => boolean;\n}): CancelablePromise<string | void> {\n  return CancelablePromise.withFn((abortSignal) => {\n    if (isOpened()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isOpened.set(true);\n\n    options ||= {};\n    const { onCaptured, text, capture } = options;\n    const [, cleanup] = createCbCollector(\n      // Whenever the scanner was closed for some reason (by a developer or a user), we should\n      // resolve the promise with undefined.\n      isOpened.sub(() => {\n        promise.resolve();\n      }),\n      // Whenever user closed the scanner, update the isOpened signal state.\n      on(SCAN_QR_POPUP_CLOSED, () => {\n        isOpened.set(false);\n      }),\n      // Whenever some QR was scanned, we should check if it must be captured.\n      on(QR_TEXT_RECEIVED, (event) => {\n        if (onCaptured) {\n          onCaptured(event.data);\n        } else if (!capture || capture(event.data)) {\n          promise.resolve(event.data);\n          close();\n        }\n      }),\n    );\n\n    const promise = new EnhancedPromise<string | void>({ abortSignal })\n      .catch(close)\n      .finally(cleanup);\n\n    (options.postEvent || postEvent)(WEB_APP_OPEN_SCAN_QR_POPUP, { text });\n\n    return promise;\n  }, options);\n}\n\n/**\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const open = withIsSupported(_open)","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport { buttonColor } from '@/scopes/components/theme-params/signals.js';\nimport { bottomBarColorRGB } from '@/scopes/components/mini-app/signals.js';\n\nimport type { State } from './types.js';\n\nfunction fromState<K extends keyof Required<State>>(key: K): Computed<Required<State>[K]> {\n  return computed(() => state()[key]);\n}\n\nexport const internalState = signal<State>({\n  hasShineEffect: false,\n  isEnabled: true,\n  isLoaderVisible: false,\n  isVisible: false,\n  position: 'left',\n  text: 'Cancel',\n});\n\n/**\n * Complete component state.\n */\nexport const state = computed<Required<State>>(() => {\n  const s = internalState();\n  return {\n    ...s,\n    backgroundColor: s.backgroundColor || bottomBarColorRGB() || '#000000',\n    textColor: s.textColor || buttonColor() || '#2481cc',\n  };\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @see State.backgroundColor\n */\nexport const backgroundColor = fromState('backgroundColor');\n\n/**\n * @see State.hasShineEffect\n */\nexport const hasShineEffect = fromState('hasShineEffect');\n\n/**\n * @see State.isEnabled\n */\nexport const isEnabled = fromState('isEnabled');\n\n/**\n * @see State.isLoaderVisible\n */\nexport const isLoaderVisible = fromState('isLoaderVisible');\n\n/**\n * @see State.isVisible\n */\nexport const isVisible = fromState('isVisible');\n\n/**\n * @see State.position\n */\nexport const position = fromState('position');\n\n/**\n * @see State.text\n */\nexport const text = fromState('text');\n\n/**\n * @see State.textColor\n */\nexport const textColor = fromState('textColor');\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\nimport { internalState, isMounted, state } from './signals.js';\nimport type { State } from './types.js';\n\ntype StorageValue = State;\n\nconst WEB_APP_SETUP_SECONDARY_BUTTON = 'web_app_setup_secondary_button';\nconst SECONDARY_BUTTON_PRESSED = 'secondary_button_pressed';\nconst STORAGE_KEY = 'secondaryButton';\n\n/**\n * @returns True if the Secondary Button is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_SETUP_SECONDARY_BUTTON);\n\nconst withIsSupported = createWithIsSupported(isSupported);\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const mount = withIsSupported((): void => {\n  if (!isMounted()) {\n    const prev = isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY);\n    prev && internalState.set(prev);\n\n    internalState.sub(onInternalStateChanged);\n    subAndCall(state, onStateChanged);\n    isMounted.set(true);\n  }\n});\n\n/**\n * Adds a new main button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const onClick = withIsSupported(\n  (fn: EventListener<'secondary_button_pressed'>): VoidFunction => on(SECONDARY_BUTTON_PRESSED, fn),\n);\n\n/**\n * Removes the main button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const offClick = withIsSupported(\n  (fn: EventListener<'secondary_button_pressed'>): void => {\n    off(SECONDARY_BUTTON_PRESSED, fn);\n  },\n);\n\nfunction onInternalStateChanged(s: State): void {\n  setStorageValue<StorageValue>(STORAGE_KEY, s);\n}\n\nfunction onStateChanged(): void {\n  const s = state();\n\n  // We should not commit changes until the payload is correct. Some version of Telegram will\n  // crash due to the empty value of the text.\n  s.text && postEvent(WEB_APP_SETUP_SECONDARY_BUTTON, {\n    color: s.backgroundColor,\n    has_shine_effect: s.hasShineEffect,\n    is_active: s.isEnabled,\n    is_progress_visible: s.isLoaderVisible,\n    is_visible: s.isVisible,\n    position: s.position,\n    text: s.text,\n    text_color: s.textColor,\n  });\n}\n\n/**\n * Updates the main button state.\n * @param updates - state changes to perform.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const setParams = withIsMounted((updates: Partial<State>): void => {\n  internalState.set({\n    ...internalState(),\n    ...Object.fromEntries(\n      Object.entries(updates).filter(([, v]) => v !== undefined),\n    ),\n  });\n});\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount(): void {\n  internalState.unsub(onInternalStateChanged);\n  state.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import {\n  off,\n  on,\n  getStorageValue,\n  setStorageValue,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\ntype StorageValue = boolean;\n\nconst WEB_APP_SETUP_SETTINGS_BUTTON = 'web_app_setup_settings_button';\nconst SETTINGS_BUTTON_PRESSED = 'settings_button_pressed';\nconst STORAGE_KEY = 'settingsButton';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @returns True if the settings button is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_SETUP_SETTINGS_BUTTON);\n\nconst withIsSupported = createWithIsSupported(isSupported);\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Hides the Settings Button.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const hide = withIsMounted((): void => {\n  isVisible.set(false);\n});\n\n/**\n * True if the component is currently visible.\n */\nexport const isVisible = signal(false);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const mount = withIsSupported((): void => {\n  if (!isMounted()) {\n    isVisible.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isVisible, onStateChanged);\n    isMounted.set(true);\n  }\n});\n\nfunction onStateChanged() {\n  const value = isVisible();\n  postEvent(WEB_APP_SETUP_SETTINGS_BUTTON, { is_visible: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Add a new Settings Button click listener.\n * @param fn - event listener.\n * @returns A function to remove bound listener.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const onClick = withIsSupported(\n  (fn: EventListener<'settings_button_pressed'>): VoidFunction => on(SETTINGS_BUTTON_PRESSED, fn),\n);\n\n/**\n * Removes the Settings Button click listener.\n * @param fn - an event listener.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const offClick = withIsSupported(\n  (fn: EventListener<'settings_button_pressed'>): void => {\n    off(SETTINGS_BUTTON_PRESSED, fn);\n  },\n);\n\n/**\n * Shows the Settings Button.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const show = withIsMounted((): void => {\n  isVisible.set(true);\n});\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n *\n * Note that this function does not remove listeners, added via the `onClick` function.\n * @see onClick\n */\nexport function unmount() {\n  isVisible.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { isPageReload } from '@telegram-apps/navigation';\nimport { getStorageValue, setStorageValue } from '@telegram-apps/bridge';\nimport { signal } from '@telegram-apps/signals';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { createWithIsSupported } from '@/scopes/toolkit/createWithIsSupported.js';\nimport { createIsSupported } from '@/scopes/toolkit/createIsSupported.js';\nimport { createWithIsMounted } from '@/scopes/toolkit/createWithIsMounted.js';\n\ntype StorageValue = boolean;\n\nconst WEB_APP_SETUP_SWIPE_BEHAVIOR = 'web_app_setup_swipe_behavior';\nconst STORAGE_KEY = 'swipeBehavior';\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * @returns True if the Swipe Behavior is supported.\n */\nexport const isSupported = createIsSupported(WEB_APP_SETUP_SWIPE_BEHAVIOR);\n\nconst withIsSupported = createWithIsSupported(isSupported);\nconst withIsMounted = createWithIsMounted(isMounted);\n\n/**\n * Disables vertical swipes.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const disableVertical = withIsMounted((): void => {\n  isVerticalEnabled.set(false);\n});\n\n/**\n * Enables vertical swipes.\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const enableVertical = withIsMounted((): void => {\n  isVerticalEnabled.set(true);\n});\n\n/**\n * True if vertical swipes are enabled.\n */\nexport const isVerticalEnabled = signal(true);\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const mount = withIsSupported((): void => {\n  if (!isMounted()) {\n    isVerticalEnabled.set(isPageReload() && getStorageValue<StorageValue>(STORAGE_KEY) || false);\n    subAndCall(isVerticalEnabled, onStateChanged);\n    isMounted.set(true);\n  }\n});\n\nfunction onStateChanged(): void {\n  const value = isVerticalEnabled();\n  postEvent(WEB_APP_SETUP_SWIPE_BEHAVIOR, { allow_vertical_swipe: value });\n  setStorageValue<StorageValue>(STORAGE_KEY, value);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  isVerticalEnabled.unsub(onStateChanged);\n  isMounted.set(false);\n}\n","import { computed, type Computed, signal } from '@telegram-apps/signals';\n\nimport type { State } from './types.js';\n\n/* USUAL */\n\n/**\n * Complete component state.\n */\nexport const state = signal<State>({\n  height: 0,\n  width: 0,\n  isExpanded: false,\n  stableHeight: 0,\n});\n\n/**\n * True if the component is currently mounted.\n */\nexport const isMounted = signal(false);\n\n/**\n * True if CSS variables are currently bound.\n */\nexport const isCssVarsBound = signal(false);\n\n/**\n * True if the component is currently mounting.\n */\nexport const isMounting = signal<boolean>(false);\n\n/**\n * Error occurred while mounting the component.\n */\nexport const mountError = signal<Error | undefined>(undefined);\n\n/* COMPUTED */\n\nfunction createStateComputed<K extends keyof State>(key: K): Computed<State[K] | undefined> {\n  return computed(() => state()[key]);\n}\n\n/**\n * The current height of the **visible area** of the Mini App.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the bot can do the same by calling `expand` method. As the position of\n * the Mini App changes, the current height value of the visible area will be updated  in real\n * time.\n *\n * Please note that the refresh rate of this value is not sufficient to smoothly follow the\n * lower border of the window. It should not be used to pin interface elements to the bottom\n * of the visible area. It's more appropriate to use the value of the `stableHeight`\n * field for this purpose.\n *\n * @see stableHeight\n */\nexport const height = createStateComputed('height');\n\n/**\n * True if the Mini App is expanded to the maximum available height. Otherwise, if\n * the Mini App occupies part of the screen and can be expanded to the full height using\n * `expand` method.\n * @see expand\n */\nexport const isExpanded = createStateComputed('isExpanded');\n\n/**\n * True if the current viewport height is stable and is not going to change in the next moment.\n */\nexport const isStable = computed(() => {\n  const s = state();\n  return s.height === s.stableHeight;\n});\n\n/**\n * The height of the visible area of the Mini App in its last stable state.\n *\n * The application can display just the top part of the Mini App, with its lower part remaining\n * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n * maximum height, while the application can do the same by calling `expand` method.\n *\n * Unlike the value of `height`, the value of `stableHeight` does not change as the position\n * of the Mini App changes with user gestures or during animations. The value of `stableHeight`\n * will be updated after all gestures and animations are completed and the Mini App reaches its\n * final size.\n *\n * @see height\n */\nexport const stableHeight = createStateComputed('stableHeight');\n\n/**\n * Currently visible area width.\n */\nexport const width = createStateComputed('width');","import type { ExecuteWithOptions, CancelablePromise } from '@telegram-apps/bridge';\n\nimport { request as _request } from '@/scopes/globals.js';\n\nexport interface RequestResult {\n  height: number;\n  isExpanded: boolean;\n  isStable: boolean;\n  width: number;\n}\n\n/**\n * Requests viewport actual information from the Telegram application.\n * @param options - request options.\n */\nexport function request(options?: ExecuteWithOptions): CancelablePromise<RequestResult> {\n  return _request('web_app_request_viewport', 'viewport_changed', options).then(r => ({\n    height: r.height,\n    width: r.width,\n    isExpanded: r.is_expanded,\n    isStable: r.is_state_stable,\n  }));\n}\n\nexport type * from './types.js';\n","import {\n  off,\n  on,\n  retrieveLaunchParams,\n  camelToKebab,\n  getStorageValue,\n  setStorageValue,\n  deleteCssVar,\n  setCssVar,\n  TypedError,\n  type EventListener,\n} from '@telegram-apps/bridge';\nimport { isPageReload } from '@telegram-apps/navigation';\n\nimport { postEvent } from '@/scopes/globals.js';\nimport { ERR_ALREADY_CALLED } from '@/errors.js';\nimport { createMountFn } from '@/scopes/createMountFn.js';\nimport { subAndCall } from '@/utils/subAndCall.js';\nimport { withIsMounted } from '@/scopes/toolkit/withIsMounted.js';\n\nimport { type GetCSSVarNameFn, request } from './static.js';\nimport {\n  state,\n  mountError,\n  isMounted,\n  isCssVarsBound,\n  isMounting,\n} from './signals.js';\nimport type { State } from './types.js';\n\ninterface StorageValue {\n  height: number;\n  isExpanded: boolean;\n  stableHeight: number;\n  width: number;\n}\n\n/**\n * Creates CSS variables connected with the current viewport.\n *\n * By default, created CSS variables names are following the pattern \"--tg-theme-{name}\", where\n * {name} is a theme parameters key name converted from camel case to kebab case.\n *\n * Default variables:\n * - `--tg-viewport-height`\n * - `--tg-viewport-width`\n * - `--tg-viewport-stable-height`\n *\n * Variables are being automatically updated if viewport was changed.\n *\n * @param getCSSVarName - function, returning complete CSS variable name for the specified\n * viewport property.\n * @returns Function to stop updating variables.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_MOUNTED\n */\nexport const bindCssVars = withIsMounted((getCSSVarName?: GetCSSVarNameFn): VoidFunction => {\n  if (isCssVarsBound()) {\n    throw new TypedError(ERR_ALREADY_CALLED);\n  }\n  getCSSVarName ||= (prop) => `--tg-viewport-${camelToKebab(prop)}`;\n  const props = ['height', 'width', 'stableHeight'] as const;\n\n  function actualize(): void {\n    props.forEach(prop => {\n      setCssVar(getCSSVarName!(prop), `${state()[prop]}px`);\n    });\n  }\n\n  actualize();\n  state.sub(actualize);\n  isCssVarsBound.set(true);\n\n  return () => {\n    props.forEach(deleteCssVar);\n    state.unsub(actualize);\n    isCssVarsBound.set(false);\n  };\n}, isMounted);\n\n/**\n * A method that expands the Mini App to the maximum available height. To find out if the Mini\n * App is expanded to the maximum height, refer to the value of the `isExpanded`.\n * @see isExpanded\n */\nexport function expand(): void {\n  postEvent('web_app_expand');\n}\n\nfunction formatState(state: State): State {\n  return {\n    isExpanded: state.isExpanded,\n    height: truncate(state.height),\n    width: truncate(state.width),\n    stableHeight: truncate(state.stableHeight),\n  };\n}\n\n/**\n * Mounts the component.\n *\n * This function restores the component state and is automatically saving it in the local storage\n * if it changed.\n */\nexport const mount = createMountFn<State>(\n  options => {\n    // Try to restore the state using the storage.\n    const s = isPageReload() && getStorageValue<StorageValue>('viewport');\n    if (s) {\n      return s;\n    }\n\n    // If the platform has a stable viewport, it means we could use the window global object\n    // properties.\n    if ([\n      'macos',\n      'tdesktop',\n      'unigram',\n      'webk',\n      'weba',\n      'web',\n    ].includes(retrieveLaunchParams().platform)) {\n      const w = window;\n      return {\n        isExpanded: true,\n        height: w.innerHeight,\n        width: w.innerWidth,\n        stableHeight: w.innerHeight,\n      };\n    }\n\n    // We were unable to retrieve data locally. In this case, we are sending a request returning\n    // the viewport information.\n    options.timeout ||= 1000;\n    return request(options).then(data => ({\n      height: data.height,\n      isExpanded: data.isExpanded,\n      stableHeight: data.isStable ? data.height : state().stableHeight,\n      width: data.width,\n    }));\n  },\n  result => {\n    on('viewport_changed', onViewportChanged);\n    subAndCall(state, onStateChanged);\n    state.set(formatState(result));\n  },\n  { isMounted, isMounting, mountError },\n);\n\nconst onViewportChanged: EventListener<'viewport_changed'> = (data) => {\n  state.set(formatState({\n    height: data.height,\n    width: data.width,\n    isExpanded: data.is_expanded,\n    stableHeight: data.is_state_stable ? data.height : state().stableHeight,\n  }));\n};\n\nfunction onStateChanged(): void {\n  setStorageValue<StorageValue>('viewport', state());\n}\n\n/**\n * Formats value to make it stay in bounds [0, +Inf).\n * @param value - value to format.\n */\nfunction truncate(value: number): number {\n  return Math.max(value, 0);\n}\n\n/**\n * Unmounts the component, removing the listener, saving the component state in the local storage.\n */\nexport function unmount(): void {\n  off('viewport_changed', onViewportChanged);\n  state.unsub(onStateChanged);\n}\n","import { supports, TypedError, type OpenLinkBrowser } from '@telegram-apps/bridge';\nimport { createSafeURL } from '@telegram-apps/navigation';\n\nimport { $version, postEvent } from '@/scopes/globals.js';\nimport { ERR_INVALID_HOSTNAME } from '@/errors.js';\n\nexport interface OpenLinkOptions {\n  /**\n   * Attempts to use the instant view mode.\n   */\n  tryInstantView?: boolean;\n  /**\n   * A preferred browser to open the link in.\n   */\n  tryBrowser?: OpenLinkBrowser;\n}\n\nconst OPEN_TG_LINK_METHOD = 'web_app_open_tg_link';\n\n/**\n * Opens a link.\n *\n * The Mini App will not be closed.\n *\n * Note that this method can be called only in response to the user\n * interaction with the Mini App interface (e.g. click inside the Mini App or on the main button).\n * @param url - URL to be opened.\n * @param options - additional options.\n */\nexport function openLink(url: string, options?: OpenLinkOptions): void {\n  options ||= {};\n  postEvent('web_app_open_link', {\n    url: createSafeURL(url).toString(),\n    try_browser: options.tryBrowser,\n    try_instant_view: options.tryInstantView,\n  });\n}\n\n/**\n * Opens a Telegram link inside Telegram app. The Mini App will be closed. It expects passing\n * links in full format, with hostname \"t.me\".\n * @param url - URL to be opened.\n * @throws {TypedError} ERR_INVALID_HOSTNAME\n */\nexport function openTelegramLink(url: string): void {\n  const { hostname, pathname, search } = new URL(url, 'https://t.me');\n  if (hostname !== 't.me') {\n    throw new TypedError(ERR_INVALID_HOSTNAME);\n  }\n\n  if (!supports(OPEN_TG_LINK_METHOD, $version())) {\n    window.location.href = url;\n    return;\n  }\n\n  postEvent(OPEN_TG_LINK_METHOD, { path_full: pathname + search });\n}\n\n/**\n * Shares specified URL with the passed to the chats, selected by user. After being called,\n * it closes the mini application.\n *\n * This method uses Telegram's Share Links.\n * @param url - URL to share.\n * @param text - text to append after the URL.\n * @see https://core.telegram.org/api/links#share-links\n * @see https://core.telegram.org/widgets/share#custom-buttons\n */\nexport function shareURL(url: string, text?: string): void {\n  openTelegramLink(\n    `https://t.me/share/url?` + new URLSearchParams({ url, text: text || '' })\n      .toString()\n      // By default, URL search params encode spaces with \"+\".\n      // We are replacing them with \"%20\", because plus symbols are working incorrectly\n      // in Telegram.\n      .replace(/\\+/g, '%20'),\n  );\n}\n","import {\n  TypedError,\n  CancelablePromise,\n  sleep,\n  type PhoneRequestedStatus,\n  type WriteAccessRequestedStatus,\n  type ExecuteWithOptions,\n} from '@telegram-apps/bridge';\nimport { searchParams, object, number, string, date } from '@telegram-apps/transformers';\n\nimport { invokeCustomMethod, request } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\nimport { ERR_ACCESS_DENIED, ERR_ALREADY_CALLED } from '@/errors.js';\nimport { signal } from '@telegram-apps/signals';\n\n/**\n * Requested contact information.\n */\nexport interface RequestedContact {\n  contact: {\n    userId: number;\n    phoneNumber: string;\n    firstName: string;\n    lastName?: string;\n  };\n  authDate: Date;\n  hash: string;\n}\n\nconst WEB_APP_REQUEST_PHONE = 'web_app_request_phone';\nconst WEB_APP_REQUEST_WRITE_ACCESS = 'web_app_request_write_access';\n\n/**\n * True if phone access is currently being requested.\n */\nexport const isRequestingPhoneAccess = signal(false);\n\n/**\n * True if write access is currently being requested.\n */\nexport const isRequestingWriteAccess = signal(false);\n\n/**\n * Attempts to get requested contact.\n * @param options - execution options.\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n */\nfunction getRequestedContact(options?: ExecuteWithOptions): CancelablePromise<RequestedContact> {\n  options ||= {};\n  return invokeCustomMethod('getRequestedContact', {}, {\n    ...options,\n    timeout: options.timeout || 5000,\n  })\n    .then(\n      searchParams({\n        contact: object({\n          userId: ['user_id', number()],\n          phoneNumber: ['phone_number', string()],\n          firstName: ['first_name', string()],\n          lastName: ['last_name', string(true)],\n        })(),\n        authDate: ['auth_date', date()],\n        hash: string(),\n      })(),\n    );\n}\n\n/**\n * Requests current user contact information. In contrary to requestPhoneAccess, this method\n * returns promise with contact information that rejects in case, user denied access, or request\n * failed.\n * @param options - additional options.\n * @throws {TypedError} ERR_ACCESS_DENIED\n * @throws {TypedError} ERR_CUSTOM_METHOD_ERR_RESPONSE\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const requestContact = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<RequestedContact> => {\n    return new CancelablePromise(\n      async (res, _, abortSignal) => {\n        const asyncOptions = {\n          postEvent: (options || {}).postEvent,\n          abortSignal,\n        };\n\n        // First of all, let's try to get the requested contact.\n        // Probably, we already requested it before.\n        try {\n          return res(await getRequestedContact(asyncOptions));\n        } catch {\n        }\n\n        // Then, request access to the user's phone.\n        const status = await requestPhoneAccess(asyncOptions);\n        if (status !== 'sent') {\n          throw new TypedError(ERR_ACCESS_DENIED);\n        }\n\n        // Time to wait before executing the next request.\n        let sleepTime = 50;\n\n        // We are trying to retrieve the requested contact until the deadline was reached.\n        while (!abortSignal.aborted) {\n          try {\n            return res(await getRequestedContact(asyncOptions));\n          } catch {\n          }\n\n          // Sleep for some time.\n          await sleep(sleepTime);\n\n          // Increase the sleep time not to kill the backend service.\n          sleepTime += 50;\n        }\n      }, options,\n    );\n  },\n  WEB_APP_REQUEST_PHONE,\n);\n\n/**\n * Requests current user phone access. Method returns promise, which resolves\n * status of the request. In case, user accepted the request, Mini App bot will receive\n * the according notification.\n *\n * To obtain the retrieved information instead, utilize the `requestContact` method.\n * @param options - additional options.\n * @see requestContact\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const requestPhoneAccess = withIsSupported(\n  (options?: ExecuteWithOptions): Promise<PhoneRequestedStatus> => {\n    if (isRequestingPhoneAccess()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isRequestingPhoneAccess.set(true);\n\n    return request(WEB_APP_REQUEST_PHONE, 'phone_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingPhoneAccess.set(false);\n      });\n  }, WEB_APP_REQUEST_PHONE,\n);\n\n/**\n * Requests write message access to the current user.\n * @param options - additional options.\n * @throws {TypedError} ERR_ALREADY_CALLED\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const requestWriteAccess = withIsSupported(\n  (options?: ExecuteWithOptions): Promise<WriteAccessRequestedStatus> => {\n    if (isRequestingWriteAccess()) {\n      throw new TypedError(ERR_ALREADY_CALLED);\n    }\n    isRequestingWriteAccess.set(true);\n\n    return request(WEB_APP_REQUEST_WRITE_ACCESS, 'write_access_requested', options)\n      .then(r => r.status)\n      .finally(() => {\n        isRequestingWriteAccess.set(false);\n      });\n  }, WEB_APP_REQUEST_WRITE_ACCESS,\n);\n","import {\n  captureSameReq,\n  retrieveLaunchParams,\n  CancelablePromise,\n  TypedError,\n  type ExecuteWithOptions,\n  type SwitchInlineQueryChatType,\n  type ExecuteWithPostEvent, supports,\n} from '@telegram-apps/bridge';\n\nimport { postEvent, createRequestId, request, $version } from '@/scopes/globals.js';\nimport { withIsSupported } from '@/scopes/toolkit/withIsSupported.js';\nimport { ERR_DATA_INVALID_SIZE } from '@/errors.js';\n\nconst WEB_APP_READ_TEXT_FROM_CLIPBOARD = 'web_app_read_text_from_clipboard';\nconst WEB_APP_SWITCH_INLINE_QUERY = 'web_app_switch_inline_query';\nconst WEB_APP_SHARE_TO_STORY = 'web_app_share_to_story';\n\nexport interface ShareStoryOptions extends ExecuteWithPostEvent {\n  /**\n   * The caption to be added to the media.\n   * 0-200 characters for regular users and 0-2048 characters for premium subscribers.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  text?: string;\n  /**\n   * An object that describes a widget link to be included in the story.\n   * Note that only premium subscribers can post stories with links.\n   * @see https://telegram.org/faq_premium#telegram-premium\n   */\n  widgetLink?: {\n    /**\n     * The URL to be included in the story.\n     */\n    url: string;\n    /**\n     * The name to be displayed for the widget link, 0-48 characters.\n     */\n    name?: string;\n  };\n}\n\n/**\n * Reads a text from the clipboard and returns a string or null. null is returned\n * in cases:\n * - A value in the clipboard is not a text.\n * - Access to the clipboard is not granted.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const readTextFromClipboard = withIsSupported(\n  (options?: ExecuteWithOptions): CancelablePromise<string | null> => {\n    const reqId = createRequestId();\n\n    return request(WEB_APP_READ_TEXT_FROM_CLIPBOARD, 'clipboard_text_received', {\n      ...options,\n      params: { req_id: reqId },\n      capture: captureSameReq(reqId),\n    }).then(({ data = null }) => data);\n  }, WEB_APP_READ_TEXT_FROM_CLIPBOARD,\n);\n\n/**\n * A method used to send data to the bot.\n *\n * When this method called, a service message sent to the bot containing the data of the length\n * up to 4096 bytes, and the Mini App closed.\n *\n * See the field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).\n *\n * This method is only available for Mini Apps launched via a Keyboard button.\n * @param data - data to send to bot.\n * @throws {TypedError} ERR_DATA_INVALID_SIZE\n */\nexport function sendData(data: string): void {\n  const { size } = new Blob([data]);\n  if (!size || size > 4096) {\n    throw new TypedError(ERR_DATA_INVALID_SIZE);\n  }\n  postEvent('web_app_data_send', { data });\n}\n\n/**\n * A method that opens the native story editor.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const shareStory = withIsSupported(\n  (mediaUrl: string, options?: ShareStoryOptions) => {\n    options ||= {};\n    (options.postEvent || postEvent)(WEB_APP_SHARE_TO_STORY, {\n      text: options.text,\n      media_url: mediaUrl,\n      widget_link: options.widgetLink,\n    });\n  }, WEB_APP_SHARE_TO_STORY,\n);\n\n/**\n * Inserts the bot's username and the specified inline query in the current chat's input field.\n * Query may be empty, in which case only the bot's username will be inserted. The client prompts\n * the user to choose a specific chat, then opens that chat and inserts the bot's username and\n * the specified inline query in the input field.\n * @param query - text which should be inserted in the input after the current bot name. Max\n * length is 256 symbols.\n * @param chatTypes - List of chat types which could be chosen to send the message. Could be\n * empty list.\n * @throws {TypedError} ERR_NOT_SUPPORTED\n */\nexport const switchInlineQuery = withIsSupported(\n  (query: string, chatTypes?: SwitchInlineQueryChatType[]) => {\n    postEvent(WEB_APP_SWITCH_INLINE_QUERY, {\n      query: query,\n      chat_types: chatTypes || [],\n    });\n  },\n  () => {\n    return supports(WEB_APP_SWITCH_INLINE_QUERY, $version()) && !!retrieveLaunchParams().botInline;\n  }\n);\n","/**\n * @returns True, if current environment is server.\n */\nexport function isSSR(): boolean {\n  return typeof window === 'undefined';\n}\n","import {\n  createCbCollector,\n  defineEventHandlers,\n  on,\n  removeEventHandlers,\n} from '@telegram-apps/bridge';\n\nimport { postEvent, configure, type ConfigureOptions } from '@/scopes/globals.js';\n\nexport interface InitOptions extends ConfigureOptions {\n  /**\n   * True if SDK should accept styles sent from the Telegram application.\n   * @default true\n   */\n  acceptCustomStyles?: boolean;\n}\n\n/**\n * Initializes the SDK allowing it to properly handle events, sent from the native Telegram\n * application.\n * @param options - function options.\n * @returns A function, to perform a cleanup.\n */\nexport function init(options?: InitOptions): VoidFunction {\n  // Configure the package global dependencies.\n  configure(options);\n\n  // Define event handlers, so we could receive the events from the Telegram application.\n  defineEventHandlers();\n\n  const [addCleanup, cleanup] = createCbCollector(\n    on('reload_iframe', () => {\n      postEvent('iframe_will_reload');\n      window.location.reload();\n    }),\n    removeEventHandlers,\n  );\n\n  const { acceptCustomStyles = true } = options || {};\n  if (acceptCustomStyles) {\n    const style = document.createElement('style');\n    style.id = 'telegram-custom-styles';\n    document.head.appendChild(style);\n\n    addCleanup(\n      on('set_custom_style', html => {\n        // It is safe to use innerHTML here as long as style tag has a special behavior related\n        // to the specified content.\n        // In case any script will be passed here, it will not be executed, so XSS is not possible.\n        style.innerHTML = html;\n      }),\n      () => {\n        document.head.removeChild(style);\n      },\n    );\n  }\n\n  // Notify Telegram that the application is ready.\n  //\n  // This will result in sending style tag html content from the Telegram web application.\n  // We should call this method also to start receiving \"reload_iframe\" events from the Telegram\n  // application.\n  //\n  // It really has no effect outside non-Telegram web environment.\n  postEvent('iframe_ready', { reload_supported: true });\n\n  return cleanup;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}